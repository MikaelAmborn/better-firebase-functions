(()=>{var __webpack_modules__={417:t=>{"use strict";t.exports=balanced;function balanced(t,e,s){if(t instanceof RegExp)t=maybeMatch(t,s);if(e instanceof RegExp)e=maybeMatch(e,s);var i=range(t,e,s);return i&&{start:i[0],end:i[1],pre:s.slice(0,i[0]),body:s.slice(i[0]+t.length,i[1]),post:s.slice(i[1]+e.length)}}function maybeMatch(t,e){var s=e.match(t);return s?s[0]:null}balanced.range=range;function range(t,e,s){var i,n,r,o,a;var h=s.indexOf(t);var l=s.indexOf(e,h+1);var c=h;if(h>=0&&l>0){i=[];r=s.length;while(c>=0&&!a){if(c==h){i.push(c);h=s.indexOf(t,c+1)}else if(i.length==1){a=[i.pop(),l]}else{n=i.pop();if(n<r){r=n;o=l}l=s.indexOf(e,c+1)}c=h<l&&h>=0?h:l}if(i.length){a=[r,o]}}return a}},362:t=>{"use strict";const e=/[\p{Lu}]/u;const s=/[\p{Ll}]/u;const i=/^[\p{Lu}](?![\p{Lu}])/gu;const n=/([\p{Alpha}\p{N}_]|$)/u;const r=/[_.\- ]+/;const o=new RegExp("^"+r.source);const a=new RegExp(r.source+n.source,"gu");const h=new RegExp("\\d+"+n.source,"gu");const preserveCamelCase=(t,i,n)=>{let r=false;let o=false;let a=false;for(let h=0;h<t.length;h++){const l=t[h];if(r&&e.test(l)){t=t.slice(0,h)+"-"+t.slice(h);r=false;a=o;o=true;h++}else if(o&&a&&s.test(l)){t=t.slice(0,h-1)+"-"+t.slice(h-1);a=o;o=false;r=true}else{r=i(l)===l&&n(l)!==l;a=o;o=n(l)===l&&i(l)!==l}}return t};const preserveConsecutiveUppercase=(t,e)=>{i.lastIndex=0;return t.replace(i,(t=>e(t)))};const postProcess=(t,e)=>{a.lastIndex=0;h.lastIndex=0;return t.replace(a,((t,s)=>e(s))).replace(h,(t=>e(t)))};const camelCase=(t,e)=>{if(!(typeof t==="string"||Array.isArray(t))){throw new TypeError("Expected the input to be `string | string[]`")}e={pascalCase:false,preserveConsecutiveUppercase:false,...e};if(Array.isArray(t)){t=t.map((t=>t.trim())).filter((t=>t.length)).join("-")}else{t=t.trim()}if(t.length===0){return""}const s=e.locale===false?t=>t.toLowerCase():t=>t.toLocaleLowerCase(e.locale);const i=e.locale===false?t=>t.toUpperCase():t=>t.toLocaleUpperCase(e.locale);if(t.length===1){return e.pascalCase?i(t):s(t)}const n=t!==s(t);if(n){t=preserveCamelCase(t,s,i)}t=t.replace(o,"");if(e.preserveConsecutiveUppercase){t=preserveConsecutiveUppercase(t,s)}else{t=s(t)}if(e.pascalCase){t=i(t.charAt(0))+t.slice(1)}return postProcess(t,i)};t.exports=camelCase;t.exports["default"]=camelCase},46:(t,e,s)=>{var i=s(417);t.exports=expandTop;var n="\0SLASH"+Math.random()+"\0";var r="\0OPEN"+Math.random()+"\0";var o="\0CLOSE"+Math.random()+"\0";var a="\0COMMA"+Math.random()+"\0";var h="\0PERIOD"+Math.random()+"\0";function numeric(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function escapeBraces(t){return t.split("\\\\").join(n).split("\\{").join(r).split("\\}").join(o).split("\\,").join(a).split("\\.").join(h)}function unescapeBraces(t){return t.split(n).join("\\").split(r).join("{").split(o).join("}").split(a).join(",").split(h).join(".")}function parseCommaParts(t){if(!t)return[""];var e=[];var s=i("{","}",t);if(!s)return t.split(",");var n=s.pre;var r=s.body;var o=s.post;var a=n.split(",");a[a.length-1]+="{"+r+"}";var h=parseCommaParts(o);if(o.length){a[a.length-1]+=h.shift();a.push.apply(a,h)}e.push.apply(e,a);return e}function expandTop(t){if(!t)return[];if(t.substr(0,2)==="{}"){t="\\{\\}"+t.substr(2)}return expand(escapeBraces(t),true).map(unescapeBraces)}function embrace(t){return"{"+t+"}"}function isPadded(t){return/^-?0\d/.test(t)}function lte(t,e){return t<=e}function gte(t,e){return t>=e}function expand(t,e){var s=[];var n=i("{","}",t);if(!n)return[t];var r=n.pre;var a=n.post.length?expand(n.post,false):[""];if(/\$$/.test(n.pre)){for(var h=0;h<a.length;h++){var l=r+"{"+n.body+"}"+a[h];s.push(l)}}else{var c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body);var f=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body);var u=c||f;var p=n.body.indexOf(",")>=0;if(!u&&!p){if(n.post.match(/,.*\}/)){t=n.pre+"{"+n.body+o+n.post;return expand(t)}return[t]}var d;if(u){d=n.body.split(/\.\./)}else{d=parseCommaParts(n.body);if(d.length===1){d=expand(d[0],false).map(embrace);if(d.length===1){return a.map((function(t){return n.pre+d[0]+t}))}}}var g;if(u){var y=numeric(d[0]);var w=numeric(d[1]);var b=Math.max(d[0].length,d[1].length);var _=d.length==3?Math.abs(numeric(d[2])):1;var S=lte;var v=w<y;if(v){_*=-1;S=gte}var k=d.some(isPadded);g=[];for(var x=y;S(x,w);x+=_){var E;if(f){E=String.fromCharCode(x);if(E==="\\")E=""}else{E=String(x);if(k){var C=b-E.length;if(C>0){var P=new Array(C+1).join("0");if(x<0)E="-"+P+E.slice(1);else E=P+E}}}g.push(E)}}else{g=[];for(var M=0;M<d.length;M++){g.push.apply(g,expand(d[M],false))}}for(var M=0;M<g.length;M++){for(var h=0;h<a.length;h++){var l=r+g[M]+a[h];if(!e||u||l)s.push(l)}}}return s}},552:t=>{var e="Expected a function";var s="__lodash_hash_undefined__";var i=1/0,n=9007199254740991;var r="[object Function]",o="[object GeneratorFunction]",a="[object Symbol]";var h=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,l=/^\w*$/,c=/^\./,f=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var u=/[\\^$.*+?()[\]{}|]/g;var p=/\\(\\)?/g;var d=/^\[object .+?Constructor\]$/;var g=/^(?:0|[1-9]\d*)$/;var y=typeof global=="object"&&global&&global.Object===Object&&global;var w=typeof self=="object"&&self&&self.Object===Object&&self;var b=y||w||Function("return this")();function getValue(t,e){return t==null?undefined:t[e]}function isHostObject(t){var e=false;if(t!=null&&typeof t.toString!="function"){try{e=!!(t+"")}catch(t){}}return e}var _=Array.prototype,S=Function.prototype,v=Object.prototype;var k=b["__core-js_shared__"];var x=function(){var t=/[^.]+$/.exec(k&&k.keys&&k.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();var E=S.toString;var C=v.hasOwnProperty;var P=v.toString;var M=RegExp("^"+E.call(C).replace(u,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var L=b.Symbol,T=_.splice;var O=getNative(b,"Map"),A=getNative(Object,"create");var F=L?L.prototype:undefined,R=F?F.toString:undefined;function Hash(t){var e=-1,s=t?t.length:0;this.clear();while(++e<s){var i=t[e];this.set(i[0],i[1])}}function hashClear(){this.__data__=A?A(null):{}}function hashDelete(t){return this.has(t)&&delete this.__data__[t]}function hashGet(t){var e=this.__data__;if(A){var i=e[t];return i===s?undefined:i}return C.call(e,t)?e[t]:undefined}function hashHas(t){var e=this.__data__;return A?e[t]!==undefined:C.call(e,t)}function hashSet(t,e){var i=this.__data__;i[t]=A&&e===undefined?s:e;return this}Hash.prototype.clear=hashClear;Hash.prototype["delete"]=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function ListCache(t){var e=-1,s=t?t.length:0;this.clear();while(++e<s){var i=t[e];this.set(i[0],i[1])}}function listCacheClear(){this.__data__=[]}function listCacheDelete(t){var e=this.__data__,s=assocIndexOf(e,t);if(s<0){return false}var i=e.length-1;if(s==i){e.pop()}else{T.call(e,s,1)}return true}function listCacheGet(t){var e=this.__data__,s=assocIndexOf(e,t);return s<0?undefined:e[s][1]}function listCacheHas(t){return assocIndexOf(this.__data__,t)>-1}function listCacheSet(t,e){var s=this.__data__,i=assocIndexOf(s,t);if(i<0){s.push([t,e])}else{s[i][1]=e}return this}ListCache.prototype.clear=listCacheClear;ListCache.prototype["delete"]=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;function MapCache(t){var e=-1,s=t?t.length:0;this.clear();while(++e<s){var i=t[e];this.set(i[0],i[1])}}function mapCacheClear(){this.__data__={hash:new Hash,map:new(O||ListCache),string:new Hash}}function mapCacheDelete(t){return getMapData(this,t)["delete"](t)}function mapCacheGet(t){return getMapData(this,t).get(t)}function mapCacheHas(t){return getMapData(this,t).has(t)}function mapCacheSet(t,e){getMapData(this,t).set(t,e);return this}MapCache.prototype.clear=mapCacheClear;MapCache.prototype["delete"]=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;function assignValue(t,e,s){var i=t[e];if(!(C.call(t,e)&&eq(i,s))||s===undefined&&!(e in t)){t[e]=s}}function assocIndexOf(t,e){var s=t.length;while(s--){if(eq(t[s][0],e)){return s}}return-1}function baseIsNative(t){if(!isObject(t)||isMasked(t)){return false}var e=isFunction(t)||isHostObject(t)?M:d;return e.test(toSource(t))}function baseSet(t,e,s,i){if(!isObject(t)){return t}e=isKey(e,t)?[e]:castPath(e);var n=-1,r=e.length,o=r-1,a=t;while(a!=null&&++n<r){var h=toKey(e[n]),l=s;if(n!=o){var c=a[h];l=i?i(c,h,a):undefined;if(l===undefined){l=isObject(c)?c:isIndex(e[n+1])?[]:{}}}assignValue(a,h,l);a=a[h]}return t}function baseToString(t){if(typeof t=="string"){return t}if(isSymbol(t)){return R?R.call(t):""}var e=t+"";return e=="0"&&1/t==-i?"-0":e}function castPath(t){return z(t)?t:D(t)}function getMapData(t,e){var s=t.__data__;return isKeyable(e)?s[typeof e=="string"?"string":"hash"]:s.map}function getNative(t,e){var s=getValue(t,e);return baseIsNative(s)?s:undefined}function isIndex(t,e){e=e==null?n:e;return!!e&&(typeof t=="number"||g.test(t))&&(t>-1&&t%1==0&&t<e)}function isKey(t,e){if(z(t)){return false}var s=typeof t;if(s=="number"||s=="symbol"||s=="boolean"||t==null||isSymbol(t)){return true}return l.test(t)||!h.test(t)||e!=null&&t in Object(e)}function isKeyable(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function isMasked(t){return!!x&&x in t}var D=memoize((function(t){t=toString(t);var e=[];if(c.test(t)){e.push("")}t.replace(f,(function(t,s,i,n){e.push(i?n.replace(p,"$1"):s||t)}));return e}));function toKey(t){if(typeof t=="string"||isSymbol(t)){return t}var e=t+"";return e=="0"&&1/t==-i?"-0":e}function toSource(t){if(t!=null){try{return E.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function memoize(t,s){if(typeof t!="function"||s&&typeof s!="function"){throw new TypeError(e)}var memoized=function(){var e=arguments,i=s?s.apply(this,e):e[0],n=memoized.cache;if(n.has(i)){return n.get(i)}var r=t.apply(this,e);memoized.cache=n.set(i,r);return r};memoized.cache=new(memoize.Cache||MapCache);return memoized}memoize.Cache=MapCache;function eq(t,e){return t===e||t!==t&&e!==e}var z=Array.isArray;function isFunction(t){var e=isObject(t)?P.call(t):"";return e==r||e==o}function isObject(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function isObjectLike(t){return!!t&&typeof t=="object"}function isSymbol(t){return typeof t=="symbol"||isObjectLike(t)&&P.call(t)==a}function toString(t){return t==null?"":baseToString(t)}function set(t,e,s){return t==null?t:baseSet(t,e,s)}t.exports=set},911:(__unused_webpack_module,__webpack_exports__,__nccwpck_require__)=>{"use strict";__nccwpck_require__.d(__webpack_exports__,{H:()=>exportFunctions,y:()=>funcNameFromRelPathDefault});var camelcase__WEBPACK_IMPORTED_MODULE_0__=__nccwpck_require__(362);var camelcase__WEBPACK_IMPORTED_MODULE_0___default=__nccwpck_require__.n(camelcase__WEBPACK_IMPORTED_MODULE_0__);var glob__WEBPACK_IMPORTED_MODULE_1__=__nccwpck_require__(544);var lodash_set__WEBPACK_IMPORTED_MODULE_2__=__nccwpck_require__(552);var lodash_set__WEBPACK_IMPORTED_MODULE_2___default=__nccwpck_require__.n(lodash_set__WEBPACK_IMPORTED_MODULE_2__);var path__WEBPACK_IMPORTED_MODULE_3__=__nccwpck_require__(17);var path__WEBPACK_IMPORTED_MODULE_3___default=__nccwpck_require__.n(path__WEBPACK_IMPORTED_MODULE_3__);function getDirnameFromFilename(t){return t.split(path__WEBPACK_IMPORTED_MODULE_3__.sep).slice(0,-1).join(path__WEBPACK_IMPORTED_MODULE_3__.sep)}function funcNameFromRelPathDefault(t){console.log("funcNameFromRelPathDefault");const e=t.split(path__WEBPACK_IMPORTED_MODULE_3__.sep);const s=e.pop();const i=e.map((t=>camelcase__WEBPACK_IMPORTED_MODULE_0___default()(t))).join(path__WEBPACK_IMPORTED_MODULE_3__.sep);const n=camelcase__WEBPACK_IMPORTED_MODULE_0___default()(s.split(".")[0]);const r=i?`${i}${path__WEBPACK_IMPORTED_MODULE_3__.sep}${n}`:n;return[r.split(path__WEBPACK_IMPORTED_MODULE_3__.sep).join("-")]}const disabledLogger={time(t){return t},timeEnd(t){return t},log(t){return t}};const getFunctionInstance=()=>process.env.FUNCTION_NAME||process.env.K_SERVICE;const isDeployment=()=>!getFunctionInstance();const funcNameMatchesInstance=t=>t===getFunctionInstance();const getTriggerFromModule=t=>t===null||t===void 0?void 0:t.default;const coldModuleMsg="[better-firebase-functions-imp] Load Module (Cold-Start)";const dirSearchMsg="[better-firebase-functions-imp] Directory Glob Search";const deployMsg="[better-firebase-functions-imp] Load & Export Modules (Deployment)";function exportFunctions({__filename:__filename,exports:exports,functionDirectoryPath:functionDirectoryPath="./",searchGlob:searchGlob="**/*.{js|ts}",funcNameFromRelPath:funcNameFromRelPath=funcNameFromRelPathDefault,enableLogger:enableLogger=false,logger:logger=console,extractTrigger:extractTrigger=getTriggerFromModule,__dirname:__dirname,exportPathMode:exportPathMode=false}){const log=enableLogger?logger:disabledLogger;const cwd=(0,path__WEBPACK_IMPORTED_MODULE_3__.resolve)(__dirname!==null&&__dirname!==void 0?__dirname:getDirnameFromFilename(__filename),functionDirectoryPath);log.time(dirSearchMsg);const files=(0,glob__WEBPACK_IMPORTED_MODULE_1__.Pv)(searchGlob,{cwd:cwd});log.timeEnd(dirSearchMsg);console.log(`Found ${files.length} matching files`);const moduleSearchMsg=`[better-firebase-functions-imp] Search for Module '${getFunctionInstance()}'`;if(isDeployment())log.time(deployMsg);else log.time(moduleSearchMsg);for(const file of files){const absPath=(0,path__WEBPACK_IMPORTED_MODULE_3__.resolve)(cwd,file);const normalizedRelativePath=absPath.slice(cwd.length+1);const funcNames=funcNameFromRelPath(normalizedRelativePath);log.log(`Found ${funcNames} in path ${normalizedRelativePath}`);if(absPath.slice(0,-2)===__filename.slice(0,-2))continue;if(!isDeployment())log.timeEnd(moduleSearchMsg);funcNames.forEach((funcName=>{log.log(`Looking at ${funcName}`);if(!isDeployment()&&!funcNameMatchesInstance(funcName))return;if(exportPathMode){lodash_set__WEBPACK_IMPORTED_MODULE_2___default()(exports,funcName.split("-"),normalizedRelativePath);return}if(!isDeployment())log.time(coldModuleMsg);let funcTrigger;try{const mod=eval("require")(absPath);funcTrigger=extractTrigger(mod,funcName,getFunctionInstance())}catch(t){console.warn(t);return}if(!isDeployment())log.timeEnd(coldModuleMsg);if(!funcTrigger)return;const propPath=funcName.split("-");console.log(`adding ${propPath} to exports with value ${funcTrigger}`);lodash_set__WEBPACK_IMPORTED_MODULE_2___default()(exports,propPath,funcTrigger)}))}if(isDeployment())log.timeEnd(deployMsg);return exports}},17:t=>{"use strict";t.exports=require("path")},544:(t,e,s)=>{"use strict";s.d(e,{Pv:()=>globSync});var i=s(46);const n=1024*64;const assertValidPattern=t=>{if(typeof t!=="string"){throw new TypeError("invalid pattern")}if(t.length>n){throw new TypeError("pattern is too long")}};const r={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",true],"[:alpha:]":["\\p{L}\\p{Nl}",true],"[:ascii:]":["\\x"+"00-\\x"+"7f",false],"[:blank:]":["\\p{Zs}\\t",true],"[:cntrl:]":["\\p{Cc}",true],"[:digit:]":["\\p{Nd}",true],"[:graph:]":["\\p{Z}\\p{C}",true,true],"[:lower:]":["\\p{Ll}",true],"[:print:]":["\\p{C}",true],"[:punct:]":["\\p{P}",true],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",true],"[:upper:]":["\\p{Lu}",true],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",true],"[:xdigit:]":["A-Fa-f0-9",false]};const braceEscape=t=>t.replace(/[[\]\\-]/g,"\\$&");const regexpEscape=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");const rangesToString=t=>t.join("");const parseClass=(t,e)=>{const s=e;if(t.charAt(s)!=="["){throw new Error("not in a brace expression")}const i=[];const n=[];let o=s+1;let a=false;let h=false;let l=false;let c=false;let f=s;let u="";t:while(o<t.length){const e=t.charAt(o);if((e==="!"||e==="^")&&o===s+1){c=true;o++;continue}if(e==="]"&&a&&!l){f=o+1;break}a=true;if(e==="\\"){if(!l){l=true;o++;continue}}if(e==="["&&!l){for(const[e,[a,l,c]]of Object.entries(r)){if(t.startsWith(e,o)){if(u){return["$.",false,t.length-s,true]}o+=e.length;if(c)n.push(a);else i.push(a);h=h||l;continue t}}}l=false;if(u){if(e>u){i.push(braceEscape(u)+"-"+braceEscape(e))}else if(e===u){i.push(braceEscape(e))}u="";o++;continue}if(t.startsWith("-]",o+1)){i.push(braceEscape(e+"-"));o+=2;continue}if(t.startsWith("-",o+1)){u=e;o+=2;continue}i.push(braceEscape(e));o++}if(f<o){return["",false,0,false]}if(!i.length&&!n.length){return["$.",false,t.length-s,true]}if(n.length===0&&i.length===1&&/^\\?.$/.test(i[0])&&!c){const t=i[0].length===2?i[0].slice(-1):i[0];return[regexpEscape(t),false,f-s,false]}const p="["+(c?"^":"")+rangesToString(i)+"]";const d="["+(c?"":"^")+rangesToString(n)+"]";const g=i.length&&n.length?"("+p+"|"+d+")":i.length?p:d;return[g,h,f-s,true]};const unescape_unescape=(t,{windowsPathsNoEscape:e=false}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");const o=new Set(["!","?","+","*","@"]);const isExtglobType=t=>o.has(t);const a="(?!(?:^|/)\\.\\.?(?:$|/))";const h="(?!\\.)";const l=new Set(["[","."]);const c=new Set(["..","."]);const f=new Set("().*{}+?[]^$\\!");const regExpEscape=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");const u="[^/]";const p=u+"*?";const d=u+"+?";class AST{type;#t;#e;#s=false;#i=[];#n;#r;#o;#a=false;#h;#l;#c=false;constructor(t,e,s={}){this.type=t;if(t)this.#e=true;this.#n=e;this.#t=this.#n?this.#n.#t:this;this.#h=this.#t===this?s:this.#t.#h;this.#o=this.#t===this?[]:this.#t.#o;if(t==="!"&&!this.#t.#a)this.#o.push(this);this.#r=this.#n?this.#n.#i.length:0}get hasMagic(){if(this.#e!==undefined)return this.#e;for(const t of this.#i){if(typeof t==="string")continue;if(t.type||t.hasMagic)return this.#e=true}return this.#e}toString(){if(this.#l!==undefined)return this.#l;if(!this.type){return this.#l=this.#i.map((t=>String(t))).join("")}else{return this.#l=this.type+"("+this.#i.map((t=>String(t))).join("|")+")"}}#f(){if(this!==this.#t)throw new Error("should only call on root");if(this.#a)return this;this.toString();this.#a=true;let t;while(t=this.#o.pop()){if(t.type!=="!")continue;let e=t;let s=e.#n;while(s){for(let i=e.#r+1;!s.type&&i<s.#i.length;i++){for(const e of t.#i){if(typeof e==="string"){throw new Error("string part in extglob AST??")}e.copyIn(s.#i[i])}}e=s;s=e.#n}}return this}push(...t){for(const e of t){if(e==="")continue;if(typeof e!=="string"&&!(e instanceof AST&&e.#n===this)){throw new Error("invalid part: "+e)}this.#i.push(e)}}toJSON(){const t=this.type===null?this.#i.slice().map((t=>typeof t==="string"?t:t.toJSON())):[this.type,...this.#i.map((t=>t.toJSON()))];if(this.isStart()&&!this.type)t.unshift([]);if(this.isEnd()&&(this===this.#t||this.#t.#a&&this.#n?.type==="!")){t.push({})}return t}isStart(){if(this.#t===this)return true;if(!this.#n?.isStart())return false;if(this.#r===0)return true;const t=this.#n;for(let e=0;e<this.#r;e++){const s=t.#i[e];if(!(s instanceof AST&&s.type==="!")){return false}}return true}isEnd(){if(this.#t===this)return true;if(this.#n?.type==="!")return true;if(!this.#n?.isEnd())return false;if(!this.type)return this.#n?.isEnd();const t=this.#n?this.#n.#i.length:0;return this.#r===t-1}copyIn(t){if(typeof t==="string")this.push(t);else this.push(t.clone(this))}clone(t){const e=new AST(this.type,t);for(const t of this.#i){e.copyIn(t)}return e}static#u(t,e,s,i){let n=false;let r=false;let o=-1;let a=false;if(e.type===null){let h=s;let l="";while(h<t.length){const s=t.charAt(h++);if(n||s==="\\"){n=!n;l+=s;continue}if(r){if(h===o+1){if(s==="^"||s==="!"){a=true}}else if(s==="]"&&!(h===o+2&&a)){r=false}l+=s;continue}else if(s==="["){r=true;o=h;a=false;l+=s;continue}if(!i.noext&&isExtglobType(s)&&t.charAt(h)==="("){e.push(l);l="";const n=new AST(s,e);h=AST.#u(t,n,h,i);e.push(n);continue}l+=s}e.push(l);return h}let h=s+1;let l=new AST(null,e);const c=[];let f="";while(h<t.length){const s=t.charAt(h++);if(n||s==="\\"){n=!n;f+=s;continue}if(r){if(h===o+1){if(s==="^"||s==="!"){a=true}}else if(s==="]"&&!(h===o+2&&a)){r=false}f+=s;continue}else if(s==="["){r=true;o=h;a=false;f+=s;continue}if(isExtglobType(s)&&t.charAt(h)==="("){l.push(f);f="";const e=new AST(s,l);l.push(e);h=AST.#u(t,e,h,i);continue}if(s==="|"){l.push(f);f="";c.push(l);l=new AST(null,e);continue}if(s===")"){if(f===""&&e.#i.length===0){e.#c=true}l.push(f);f="";e.push(...c,l);return h}f+=s}e.type=null;e.#e=undefined;e.#i=[t.substring(s-1)];return h}static fromGlob(t,e={}){const s=new AST(null,undefined,e);AST.#u(t,s,0,e);return s}toMMPattern(){if(this!==this.#t)return this.#t.toMMPattern();const t=this.toString();const[e,s,i,n]=this.toRegExpSource();const r=i||this.#e||this.#h.nocase&&!this.#h.nocaseMagicOnly&&t.toUpperCase()!==t.toLowerCase();if(!r){return s}const o=(this.#h.nocase?"i":"")+(n?"u":"");return Object.assign(new RegExp(`^${e}$`,o),{_src:e,_glob:t})}get options(){return this.#h}toRegExpSource(t){const e=t??!!this.#h.dot;if(this.#t===this)this.#f();if(!this.type){const s=this.isStart()&&this.isEnd();const i=this.#i.map((e=>{const[i,n,r,o]=typeof e==="string"?AST.#p(e,this.#e,s):e.toRegExpSource(t);this.#e=this.#e||r;this.#s=this.#s||o;return i})).join("");let n="";if(this.isStart()){if(typeof this.#i[0]==="string"){const s=this.#i.length===1&&c.has(this.#i[0]);if(!s){const s=l;const r=e&&s.has(i.charAt(0))||i.startsWith("\\.")&&s.has(i.charAt(2))||i.startsWith("\\.\\.")&&s.has(i.charAt(4));const o=!e&&!t&&s.has(i.charAt(0));n=r?a:o?h:""}}}let r="";if(this.isEnd()&&this.#t.#a&&this.#n?.type==="!"){r="(?:$|\\/)"}const o=n+i+r;return[o,unescape_unescape(i),this.#e=!!this.#e,this.#s]}const s=this.type==="*"||this.type==="+";const i=this.type==="!"?"(?:(?!(?:":"(?:";let n=this.#d(e);if(this.isStart()&&this.isEnd()&&!n&&this.type!=="!"){const t=this.toString();this.#i=[t];this.type=null;this.#e=undefined;return[t,unescape_unescape(this.toString()),false,false]}let r=!s||t||e||!h?"":this.#d(true);if(r===n){r=""}if(r){n=`(?:${n})(?:${r})*?`}let o="";if(this.type==="!"&&this.#c){o=(this.isStart()&&!e?h:"")+d}else{const s=this.type==="!"?"))"+(this.isStart()&&!e&&!t?h:"")+p+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&r?")":this.type==="*"&&r?`)?`:`)${this.type}`;o=i+n+s}return[o,unescape_unescape(n),this.#e=!!this.#e,this.#s]}#d(t){return this.#i.map((e=>{if(typeof e==="string"){throw new Error("string type in extglob ast??")}const[s,i,n,r]=e.toRegExpSource(t);this.#s=this.#s||r;return s})).filter((t=>!(this.isStart()&&this.isEnd())||!!t)).join("|")}static#p(t,e,s=false){let i=false;let n="";let r=false;for(let o=0;o<t.length;o++){const a=t.charAt(o);if(i){i=false;n+=(f.has(a)?"\\":"")+a;continue}if(a==="\\"){if(o===t.length-1){n+="\\\\"}else{i=true}continue}if(a==="["){const[s,i,a,h]=parseClass(t,o);if(a){n+=s;r=r||i;o+=a-1;e=e||h;continue}}if(a==="*"){if(s&&t==="*")n+=d;else n+=p;e=true;continue}if(a==="?"){n+=u;e=true;continue}n+=regExpEscape(a)}return[n,unescape_unescape(t),!!e,r]}}const escape_escape=(t,{windowsPathsNoEscape:e=false}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");const minimatch=(t,e,s={})=>{assertValidPattern(e);if(!s.nocomment&&e.charAt(0)==="#"){return false}return new Minimatch(e,s).match(t)};const g=/^\*+([^+@!?\*\[\(]*)$/;const starDotExtTest=t=>e=>!e.startsWith(".")&&e.endsWith(t);const starDotExtTestDot=t=>e=>e.endsWith(t);const starDotExtTestNocase=t=>{t=t.toLowerCase();return e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)};const starDotExtTestNocaseDot=t=>{t=t.toLowerCase();return e=>e.toLowerCase().endsWith(t)};const y=/^\*+\.\*+$/;const starDotStarTest=t=>!t.startsWith(".")&&t.includes(".");const starDotStarTestDot=t=>t!=="."&&t!==".."&&t.includes(".");const w=/^\.\*+$/;const dotStarTest=t=>t!=="."&&t!==".."&&t.startsWith(".");const b=/^\*+$/;const starTest=t=>t.length!==0&&!t.startsWith(".");const starTestDot=t=>t.length!==0&&t!=="."&&t!=="..";const _=/^\?+([^+@!?\*\[\(]*)?$/;const qmarksTestNocase=([t,e=""])=>{const s=qmarksTestNoExt([t]);if(!e)return s;e=e.toLowerCase();return t=>s(t)&&t.toLowerCase().endsWith(e)};const qmarksTestNocaseDot=([t,e=""])=>{const s=qmarksTestNoExtDot([t]);if(!e)return s;e=e.toLowerCase();return t=>s(t)&&t.toLowerCase().endsWith(e)};const qmarksTestDot=([t,e=""])=>{const s=qmarksTestNoExtDot([t]);return!e?s:t=>s(t)&&t.endsWith(e)};const qmarksTest=([t,e=""])=>{const s=qmarksTestNoExt([t]);return!e?s:t=>s(t)&&t.endsWith(e)};const qmarksTestNoExt=([t])=>{const e=t.length;return t=>t.length===e&&!t.startsWith(".")};const qmarksTestNoExtDot=([t])=>{const e=t.length;return t=>t.length===e&&t!=="."&&t!==".."};const S=typeof process==="object"&&process?typeof process.env==="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix";const v={win32:{sep:"\\"},posix:{sep:"/"}};const k=S==="win32"?v.win32.sep:v.posix.sep;minimatch.sep=k;const x=Symbol("globstar **");minimatch.GLOBSTAR=x;const E="[^/]";const C=E+"*?";const P="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?";const M="(?:(?!(?:\\/|^)\\.).)*?";const filter=(t,e={})=>s=>minimatch(s,t,e);minimatch.filter=filter;const ext=(t,e={})=>Object.assign({},t,e);const defaults=t=>{if(!t||typeof t!=="object"||!Object.keys(t).length){return minimatch}const e=minimatch;const m=(s,i,n={})=>e(s,i,ext(t,n));return Object.assign(m,{Minimatch:class Minimatch extends e.Minimatch{constructor(e,s={}){super(e,ext(t,s))}static defaults(s){return e.defaults(ext(t,s)).Minimatch}},AST:class AST extends e.AST{constructor(e,s,i={}){super(e,s,ext(t,i))}static fromGlob(s,i={}){return e.AST.fromGlob(s,ext(t,i))}},unescape:(s,i={})=>e.unescape(s,ext(t,i)),escape:(s,i={})=>e.escape(s,ext(t,i)),filter:(s,i={})=>e.filter(s,ext(t,i)),defaults:s=>e.defaults(ext(t,s)),makeRe:(s,i={})=>e.makeRe(s,ext(t,i)),braceExpand:(s,i={})=>e.braceExpand(s,ext(t,i)),match:(s,i,n={})=>e.match(s,i,ext(t,n)),sep:e.sep,GLOBSTAR:x})};minimatch.defaults=defaults;const braceExpand=(t,e={})=>{assertValidPattern(t);if(e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)){return[t]}return i(t)};minimatch.braceExpand=braceExpand;const makeRe=(t,e={})=>new Minimatch(t,e).makeRe();minimatch.makeRe=makeRe;const match=(t,e,s={})=>{const i=new Minimatch(e,s);t=t.filter((t=>i.match(t)));if(i.options.nonull&&!t.length){t.push(e)}return t};minimatch.match=match;const L=/[?*]|[+@!]\(.*?\)|\[|\]/;const esm_regExpEscape=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");class Minimatch{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(t,e={}){assertValidPattern(t);e=e||{};this.options=e;this.pattern=t;this.platform=e.platform||S;this.isWindows=this.platform==="win32";this.windowsPathsNoEscape=!!e.windowsPathsNoEscape||e.allowWindowsEscape===false;if(this.windowsPathsNoEscape){this.pattern=this.pattern.replace(/\\/g,"/")}this.preserveMultipleSlashes=!!e.preserveMultipleSlashes;this.regexp=null;this.negate=false;this.nonegate=!!e.nonegate;this.comment=false;this.empty=false;this.partial=!!e.partial;this.nocase=!!this.options.nocase;this.windowsNoMagicRoot=e.windowsNoMagicRoot!==undefined?e.windowsNoMagicRoot:!!(this.isWindows&&this.nocase);this.globSet=[];this.globParts=[];this.set=[];this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1){return true}for(const t of this.set){for(const e of t){if(typeof e!=="string")return true}}return false}debug(...t){}make(){const t=this.pattern;const e=this.options;if(!e.nocomment&&t.charAt(0)==="#"){this.comment=true;return}if(!t){this.empty=true;return}this.parseNegate();this.globSet=[...new Set(this.braceExpand())];if(e.debug){this.debug=(...t)=>console.error(...t)}this.debug(this.pattern,this.globSet);const s=this.globSet.map((t=>this.slashSplit(t)));this.globParts=this.preprocess(s);this.debug(this.pattern,this.globParts);let i=this.globParts.map(((t,e,s)=>{if(this.isWindows&&this.windowsNoMagicRoot){const e=t[0]===""&&t[1]===""&&(t[2]==="?"||!L.test(t[2]))&&!L.test(t[3]);const s=/^[a-z]:/i.test(t[0]);if(e){return[...t.slice(0,4),...t.slice(4).map((t=>this.parse(t)))]}else if(s){return[t[0],...t.slice(1).map((t=>this.parse(t)))]}}return t.map((t=>this.parse(t)))}));this.debug(this.pattern,i);this.set=i.filter((t=>t.indexOf(false)===-1));if(this.isWindows){for(let t=0;t<this.set.length;t++){const e=this.set[t];if(e[0]===""&&e[1]===""&&this.globParts[t][2]==="?"&&typeof e[3]==="string"&&/^[a-z]:$/i.test(e[3])){e[2]="?"}}}this.debug(this.pattern,this.set)}preprocess(t){if(this.options.noglobstar){for(let e=0;e<t.length;e++){for(let s=0;s<t[e].length;s++){if(t[e][s]==="**"){t[e][s]="*"}}}}const{optimizationLevel:e=1}=this.options;if(e>=2){t=this.firstPhasePreProcess(t);t=this.secondPhasePreProcess(t)}else if(e>=1){t=this.levelOneOptimize(t)}else{t=this.adjascentGlobstarOptimize(t)}return t}adjascentGlobstarOptimize(t){return t.map((t=>{let e=-1;while(-1!==(e=t.indexOf("**",e+1))){let s=e;while(t[s+1]==="**"){s++}if(s!==e){t.splice(e,s-e)}}return t}))}levelOneOptimize(t){return t.map((t=>{t=t.reduce(((t,e)=>{const s=t[t.length-1];if(e==="**"&&s==="**"){return t}if(e===".."){if(s&&s!==".."&&s!=="."&&s!=="**"){t.pop();return t}}t.push(e);return t}),[]);return t.length===0?[""]:t}))}levelTwoFileOptimize(t){if(!Array.isArray(t)){t=this.slashSplit(t)}let e=false;do{e=false;if(!this.preserveMultipleSlashes){for(let s=1;s<t.length-1;s++){const i=t[s];if(s===1&&i===""&&t[0]==="")continue;if(i==="."||i===""){e=true;t.splice(s,1);s--}}if(t[0]==="."&&t.length===2&&(t[1]==="."||t[1]==="")){e=true;t.pop()}}let s=0;while(-1!==(s=t.indexOf("..",s+1))){const i=t[s-1];if(i&&i!=="."&&i!==".."&&i!=="**"){e=true;t.splice(s-1,2);s-=2}}}while(e);return t.length===0?[""]:t}firstPhasePreProcess(t){let e=false;do{e=false;for(let s of t){let i=-1;while(-1!==(i=s.indexOf("**",i+1))){let n=i;while(s[n+1]==="**"){n++}if(n>i){s.splice(i+1,n-i)}let r=s[i+1];const o=s[i+2];const a=s[i+3];if(r!=="..")continue;if(!o||o==="."||o===".."||!a||a==="."||a===".."){continue}e=true;s.splice(i,1);const h=s.slice(0);h[i]="**";t.push(h);i--}if(!this.preserveMultipleSlashes){for(let t=1;t<s.length-1;t++){const i=s[t];if(t===1&&i===""&&s[0]==="")continue;if(i==="."||i===""){e=true;s.splice(t,1);t--}}if(s[0]==="."&&s.length===2&&(s[1]==="."||s[1]==="")){e=true;s.pop()}}let n=0;while(-1!==(n=s.indexOf("..",n+1))){const t=s[n-1];if(t&&t!=="."&&t!==".."&&t!=="**"){e=true;const t=n===1&&s[n+1]==="**";const i=t?["."]:[];s.splice(n-1,2,...i);if(s.length===0)s.push("");n-=2}}}}while(e);return t}secondPhasePreProcess(t){for(let e=0;e<t.length-1;e++){for(let s=e+1;s<t.length;s++){const i=this.partsMatch(t[e],t[s],!this.preserveMultipleSlashes);if(!i)continue;t[e]=i;t[s]=[]}}return t.filter((t=>t.length))}partsMatch(t,e,s=false){let i=0;let n=0;let r=[];let o="";while(i<t.length&&n<e.length){if(t[i]===e[n]){r.push(o==="b"?e[n]:t[i]);i++;n++}else if(s&&t[i]==="**"&&e[n]===t[i+1]){r.push(t[i]);i++}else if(s&&e[n]==="**"&&t[i]===e[n+1]){r.push(e[n]);n++}else if(t[i]==="*"&&e[n]&&(this.options.dot||!e[n].startsWith("."))&&e[n]!=="**"){if(o==="b")return false;o="a";r.push(t[i]);i++;n++}else if(e[n]==="*"&&t[i]&&(this.options.dot||!t[i].startsWith("."))&&t[i]!=="**"){if(o==="a")return false;o="b";r.push(e[n]);i++;n++}else{return false}}return t.length===e.length&&r}parseNegate(){if(this.nonegate)return;const t=this.pattern;let e=false;let s=0;for(let i=0;i<t.length&&t.charAt(i)==="!";i++){e=!e;s++}if(s)this.pattern=t.slice(s);this.negate=e}matchOne(t,e,s=false){const i=this.options;if(this.isWindows){const s=typeof t[0]==="string"&&/^[a-z]:$/i.test(t[0]);const i=!s&&t[0]===""&&t[1]===""&&t[2]==="?"&&/^[a-z]:$/i.test(t[3]);const n=typeof e[0]==="string"&&/^[a-z]:$/i.test(e[0]);const r=!n&&e[0]===""&&e[1]===""&&e[2]==="?"&&typeof e[3]==="string"&&/^[a-z]:$/i.test(e[3]);const o=i?3:s?0:undefined;const a=r?3:n?0:undefined;if(typeof o==="number"&&typeof a==="number"){const[s,i]=[t[o],e[a]];if(s.toLowerCase()===i.toLowerCase()){e[a]=s;if(a>o){e=e.slice(a)}else if(o>a){t=t.slice(o)}}}}const{optimizationLevel:n=1}=this.options;if(n>=2){t=this.levelTwoFileOptimize(t)}this.debug("matchOne",this,{file:t,pattern:e});this.debug("matchOne",t.length,e.length);for(var r=0,o=0,a=t.length,h=e.length;r<a&&o<h;r++,o++){this.debug("matchOne loop");var l=e[o];var c=t[r];this.debug(e,l,c);if(l===false){return false}if(l===x){this.debug("GLOBSTAR",[e,l,c]);var f=r;var u=o+1;if(u===h){this.debug("** at the end");for(;r<a;r++){if(t[r]==="."||t[r]===".."||!i.dot&&t[r].charAt(0)===".")return false}return true}while(f<a){var p=t[f];this.debug("\nglobstar while",t,f,e,u,p);if(this.matchOne(t.slice(f),e.slice(u),s)){this.debug("globstar found match!",f,a,p);return true}else{if(p==="."||p===".."||!i.dot&&p.charAt(0)==="."){this.debug("dot detected!",t,f,e,u);break}this.debug("globstar swallow a segment, and continue");f++}}if(s){this.debug("\n>>> no match, partial?",t,f,e,u);if(f===a){return true}}return false}let n;if(typeof l==="string"){n=c===l;this.debug("string match",l,c,n)}else{n=l.test(c);this.debug("pattern match",l,c,n)}if(!n)return false}if(r===a&&o===h){return true}else if(r===a){return s}else if(o===h){return r===a-1&&t[r]===""}else{throw new Error("wtf?")}}braceExpand(){return braceExpand(this.pattern,this.options)}parse(t){assertValidPattern(t);const e=this.options;if(t==="**")return x;if(t==="")return"";let s;let i=null;if(s=t.match(b)){i=e.dot?starTestDot:starTest}else if(s=t.match(g)){i=(e.nocase?e.dot?starDotExtTestNocaseDot:starDotExtTestNocase:e.dot?starDotExtTestDot:starDotExtTest)(s[1])}else if(s=t.match(_)){i=(e.nocase?e.dot?qmarksTestNocaseDot:qmarksTestNocase:e.dot?qmarksTestDot:qmarksTest)(s)}else if(s=t.match(y)){i=e.dot?starDotStarTestDot:starDotStarTest}else if(s=t.match(w)){i=dotStarTest}const n=AST.fromGlob(t,this.options).toMMPattern();if(i&&typeof n==="object"){Reflect.defineProperty(n,"test",{value:i})}return n}makeRe(){if(this.regexp||this.regexp===false)return this.regexp;const t=this.set;if(!t.length){this.regexp=false;return this.regexp}const e=this.options;const s=e.noglobstar?C:e.dot?P:M;const i=new Set(e.nocase?["i"]:[]);let n=t.map((t=>{const e=t.map((t=>{if(t instanceof RegExp){for(const e of t.flags.split(""))i.add(e)}return typeof t==="string"?esm_regExpEscape(t):t===x?x:t._src}));e.forEach(((t,i)=>{const n=e[i+1];const r=e[i-1];if(t!==x||r===x){return}if(r===undefined){if(n!==undefined&&n!==x){e[i+1]="(?:\\/|"+s+"\\/)?"+n}else{e[i]=s}}else if(n===undefined){e[i-1]=r+"(?:\\/|"+s+")?"}else if(n!==x){e[i-1]=r+"(?:\\/|\\/"+s+"\\/)"+n;e[i+1]=x}}));return e.filter((t=>t!==x)).join("/")})).join("|");const[r,o]=t.length>1?["(?:",")"]:["",""];n="^"+r+n+o+"$";if(this.negate)n="^(?!"+n+").+$";try{this.regexp=new RegExp(n,[...i].join(""))}catch(t){this.regexp=false}return this.regexp}slashSplit(t){if(this.preserveMultipleSlashes){return t.split("/")}else if(this.isWindows&&/^\/\/[^\/]+/.test(t)){return["",...t.split(/\/+/)]}else{return t.split(/\/+/)}}match(t,e=this.partial){this.debug("match",t,this.pattern);if(this.comment){return false}if(this.empty){return t===""}if(t==="/"&&e){return true}const s=this.options;if(this.isWindows){t=t.split("\\").join("/")}const i=this.slashSplit(t);this.debug(this.pattern,"split",i);const n=this.set;this.debug(this.pattern,"set",n);let r=i[i.length-1];if(!r){for(let t=i.length-2;!r&&t>=0;t--){r=i[t]}}for(let t=0;t<n.length;t++){const o=n[t];let a=i;if(s.matchBase&&o.length===1){a=[r]}const h=this.matchOne(a,o,e);if(h){if(s.flipNegate){return true}return!this.negate}}if(s.flipNegate){return false}return this.negate}static defaults(t){return minimatch.defaults(t).Minimatch}}minimatch.AST=AST;minimatch.Minimatch=Minimatch;minimatch.escape=escape_escape;minimatch.unescape=unescape_unescape;const T=typeof performance==="object"&&performance&&typeof performance.now==="function"?performance:Date;const O=new Set;const A=typeof process==="object"&&!!process?process:{};const emitWarning=(t,e,s,i)=>{typeof A.emitWarning==="function"?A.emitWarning(t,e,s,i):console.error(`[${s}] ${e}: ${t}`)};let F=globalThis.AbortController;let R=globalThis.AbortSignal;if(typeof F==="undefined"){R=class AbortSignal{onabort;_onabort=[];reason;aborted=false;addEventListener(t,e){this._onabort.push(e)}};F=class AbortController{constructor(){warnACPolyfill()}signal=new R;abort(t){if(this.signal.aborted)return;this.signal.reason=t;this.signal.aborted=true;for(const e of this.signal._onabort){e(t)}this.signal.onabort?.(t)}};let t=A.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1";const warnACPolyfill=()=>{if(!t)return;t=false;emitWarning("AbortController is not defined. If using lru-cache in "+"node 14, load an AbortController polyfill from the "+"`node-abort-controller` package. A minimal polyfill is "+"provided for use by LRUCache.fetch(), but it should not be "+"relied upon in other contexts (eg, passing it to other APIs that "+"use AbortController/AbortSignal might have undesirable effects). "+"You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",warnACPolyfill)}}const shouldWarn=t=>!O.has(t);const D=Symbol("type");const isPosInt=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t);const getUintArray=t=>!isPosInt(t)?null:t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?ZeroArray:null;class ZeroArray extends Array{constructor(t){super(t);this.fill(0)}}class Stack{heap;length;static#g=false;static create(t){const e=getUintArray(t);if(!e)return[];Stack.#g=true;const s=new Stack(t,e);Stack.#g=false;return s}constructor(t,e){if(!Stack.#g){throw new TypeError("instantiate Stack using Stack.create(n)")}this.heap=new e(t);this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}}class LRUCache{#m;#y;#w;#b;#_;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#S;#v;#k;#x;#E;#C;#P;#M;#L;#T;#O;#A;#F;#R;#D;#z;#I;static unsafeExposeInternals(t){return{starts:t.#F,ttls:t.#R,sizes:t.#A,keyMap:t.#k,keyList:t.#x,valList:t.#E,next:t.#C,prev:t.#P,get head(){return t.#M},get tail(){return t.#L},free:t.#T,isBackgroundFetch:e=>t.#N(e),backgroundFetch:(e,s,i,n)=>t.#B(e,s,i,n),moveToTail:e=>t.#j(e),indexes:e=>t.#W(e),rindexes:e=>t.#U(e),isStale:e=>t.#G(e)}}get max(){return this.#m}get maxSize(){return this.#y}get calculatedSize(){return this.#v}get size(){return this.#S}get fetchMethod(){return this.#_}get dispose(){return this.#w}get disposeAfter(){return this.#b}constructor(t){const{max:e=0,ttl:s,ttlResolution:i=1,ttlAutopurge:n,updateAgeOnGet:r,updateAgeOnHas:o,allowStale:a,dispose:h,disposeAfter:l,noDisposeOnSet:c,noUpdateTTL:f,maxSize:u=0,maxEntrySize:p=0,sizeCalculation:d,fetchMethod:g,noDeleteOnFetchRejection:y,noDeleteOnStaleGet:w,allowStaleOnFetchRejection:b,allowStaleOnFetchAbort:_,ignoreFetchAbort:S}=t;if(e!==0&&!isPosInt(e)){throw new TypeError("max option must be a nonnegative integer")}const v=e?getUintArray(e):Array;if(!v){throw new Error("invalid max value: "+e)}this.#m=e;this.#y=u;this.maxEntrySize=p||this.#y;this.sizeCalculation=d;if(this.sizeCalculation){if(!this.#y&&!this.maxEntrySize){throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize")}if(typeof this.sizeCalculation!=="function"){throw new TypeError("sizeCalculation set to non-function")}}if(g!==undefined&&typeof g!=="function"){throw new TypeError("fetchMethod must be a function if specified")}this.#_=g;this.#z=!!g;this.#k=new Map;this.#x=new Array(e).fill(undefined);this.#E=new Array(e).fill(undefined);this.#C=new v(e);this.#P=new v(e);this.#M=0;this.#L=0;this.#T=Stack.create(e);this.#S=0;this.#v=0;if(typeof h==="function"){this.#w=h}if(typeof l==="function"){this.#b=l;this.#O=[]}else{this.#b=undefined;this.#O=undefined}this.#D=!!this.#w;this.#I=!!this.#b;this.noDisposeOnSet=!!c;this.noUpdateTTL=!!f;this.noDeleteOnFetchRejection=!!y;this.allowStaleOnFetchRejection=!!b;this.allowStaleOnFetchAbort=!!_;this.ignoreFetchAbort=!!S;if(this.maxEntrySize!==0){if(this.#y!==0){if(!isPosInt(this.#y)){throw new TypeError("maxSize must be a positive integer if specified")}}if(!isPosInt(this.maxEntrySize)){throw new TypeError("maxEntrySize must be a positive integer if specified")}this.#$()}this.allowStale=!!a;this.noDeleteOnStaleGet=!!w;this.updateAgeOnGet=!!r;this.updateAgeOnHas=!!o;this.ttlResolution=isPosInt(i)||i===0?i:1;this.ttlAutopurge=!!n;this.ttl=s||0;if(this.ttl){if(!isPosInt(this.ttl)){throw new TypeError("ttl must be a positive integer if specified")}this.#q()}if(this.#m===0&&this.ttl===0&&this.#y===0){throw new TypeError("At least one of max, maxSize, or ttl is required")}if(!this.ttlAutopurge&&!this.#m&&!this.#y){const t="LRU_CACHE_UNBOUNDED";if(shouldWarn(t)){O.add(t);const e="TTL caching without ttlAutopurge, max, or maxSize can "+"result in unbounded memory consumption.";emitWarning(e,"UnboundedCacheWarning",t,LRUCache)}}}getRemainingTTL(t){return this.#k.has(t)?Infinity:0}#q(){const t=new ZeroArray(this.#m);const e=new ZeroArray(this.#m);this.#R=t;this.#F=e;this.#H=(s,i,n=T.now())=>{e[s]=i!==0?n:0;t[s]=i;if(i!==0&&this.ttlAutopurge){const t=setTimeout((()=>{if(this.#G(s)){this.delete(this.#x[s])}}),i+1);if(t.unref){t.unref()}}};this.#K=s=>{e[s]=t[s]!==0?T.now():0};this.#V=(i,n)=>{if(t[n]){const r=t[n];const o=e[n];if(!r||!o)return;i.ttl=r;i.start=o;i.now=s||getNow();const a=i.now-o;i.remainingTTL=r-a}};let s=0;const getNow=()=>{const t=T.now();if(this.ttlResolution>0){s=t;const e=setTimeout((()=>s=0),this.ttlResolution);if(e.unref){e.unref()}}return t};this.getRemainingTTL=i=>{const n=this.#k.get(i);if(n===undefined){return 0}const r=t[n];const o=e[n];if(!r||!o){return Infinity}const a=(s||getNow())-o;return r-a};this.#G=i=>{const n=e[i];const r=t[i];return!!r&&!!n&&(s||getNow())-n>r}}#K=()=>{};#V=()=>{};#H=()=>{};#G=()=>false;#$(){const t=new ZeroArray(this.#m);this.#v=0;this.#A=t;this.#Z=e=>{this.#v-=t[e];t[e]=0};this.#J=(t,e,s,i)=>{if(this.#N(e)){return 0}if(!isPosInt(s)){if(i){if(typeof i!=="function"){throw new TypeError("sizeCalculation must be a function")}s=i(e,t);if(!isPosInt(s)){throw new TypeError("sizeCalculation return invalid (expect positive integer)")}}else{throw new TypeError("invalid size value (must be positive integer). "+"When maxSize or maxEntrySize is used, sizeCalculation "+"or size must be set.")}}return s};this.#Y=(e,s,i)=>{t[e]=s;if(this.#y){const s=this.#y-t[e];while(this.#v>s){this.#X(true)}}this.#v+=t[e];if(i){i.entrySize=s;i.totalCalculatedSize=this.#v}}}#Z=t=>{};#Y=(t,e,s)=>{};#J=(t,e,s,i)=>{if(s||i){throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache")}return 0};*#W({allowStale:t=this.allowStale}={}){if(this.#S){for(let e=this.#L;true;){if(!this.#Q(e)){break}if(t||!this.#G(e)){yield e}if(e===this.#M){break}else{e=this.#P[e]}}}}*#U({allowStale:t=this.allowStale}={}){if(this.#S){for(let e=this.#M;true;){if(!this.#Q(e)){break}if(t||!this.#G(e)){yield e}if(e===this.#L){break}else{e=this.#C[e]}}}}#Q(t){return t!==undefined&&this.#k.get(this.#x[t])===t}*entries(){for(const t of this.#W()){if(this.#E[t]!==undefined&&this.#x[t]!==undefined&&!this.#N(this.#E[t])){yield[this.#x[t],this.#E[t]]}}}*rentries(){for(const t of this.#U()){if(this.#E[t]!==undefined&&this.#x[t]!==undefined&&!this.#N(this.#E[t])){yield[this.#x[t],this.#E[t]]}}}*keys(){for(const t of this.#W()){const e=this.#x[t];if(e!==undefined&&!this.#N(this.#E[t])){yield e}}}*rkeys(){for(const t of this.#U()){const e=this.#x[t];if(e!==undefined&&!this.#N(this.#E[t])){yield e}}}*values(){for(const t of this.#W()){const e=this.#E[t];if(e!==undefined&&!this.#N(this.#E[t])){yield this.#E[t]}}}*rvalues(){for(const t of this.#U()){const e=this.#E[t];if(e!==undefined&&!this.#N(this.#E[t])){yield this.#E[t]}}}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(t,e={}){for(const s of this.#W()){const i=this.#E[s];const n=this.#N(i)?i.__staleWhileFetching:i;if(n===undefined)continue;if(t(n,this.#x[s],this)){return this.get(this.#x[s],e)}}}forEach(t,e=this){for(const s of this.#W()){const i=this.#E[s];const n=this.#N(i)?i.__staleWhileFetching:i;if(n===undefined)continue;t.call(e,n,this.#x[s],this)}}rforEach(t,e=this){for(const s of this.#U()){const i=this.#E[s];const n=this.#N(i)?i.__staleWhileFetching:i;if(n===undefined)continue;t.call(e,n,this.#x[s],this)}}purgeStale(){let t=false;for(const e of this.#U({allowStale:true})){if(this.#G(e)){this.delete(this.#x[e]);t=true}}return t}info(t){const e=this.#k.get(t);if(e===undefined)return undefined;const s=this.#E[e];const i=this.#N(s)?s.__staleWhileFetching:s;if(i===undefined)return undefined;const n={value:i};if(this.#R&&this.#F){const t=this.#R[e];const s=this.#F[e];if(t&&s){const e=t-(T.now()-s);n.ttl=e;n.start=Date.now()}}if(this.#A){n.size=this.#A[e]}return n}dump(){const t=[];for(const e of this.#W({allowStale:true})){const s=this.#x[e];const i=this.#E[e];const n=this.#N(i)?i.__staleWhileFetching:i;if(n===undefined||s===undefined)continue;const r={value:n};if(this.#R&&this.#F){r.ttl=this.#R[e];const t=T.now()-this.#F[e];r.start=Math.floor(Date.now()-t)}if(this.#A){r.size=this.#A[e]}t.unshift([s,r])}return t}load(t){this.clear();for(const[e,s]of t){if(s.start){const t=Date.now()-s.start;s.start=T.now()-t}this.set(e,s.value,s)}}set(t,e,s={}){if(e===undefined){this.delete(t);return this}const{ttl:i=this.ttl,start:n,noDisposeOnSet:r=this.noDisposeOnSet,sizeCalculation:o=this.sizeCalculation,status:a}=s;let{noUpdateTTL:h=this.noUpdateTTL}=s;const l=this.#J(t,e,s.size||0,o);if(this.maxEntrySize&&l>this.maxEntrySize){if(a){a.set="miss";a.maxEntrySizeExceeded=true}this.delete(t);return this}let c=this.#S===0?undefined:this.#k.get(t);if(c===undefined){c=this.#S===0?this.#L:this.#T.length!==0?this.#T.pop():this.#S===this.#m?this.#X(false):this.#S;this.#x[c]=t;this.#E[c]=e;this.#k.set(t,c);this.#C[this.#L]=c;this.#P[c]=this.#L;this.#L=c;this.#S++;this.#Y(c,l,a);if(a)a.set="add";h=false}else{this.#j(c);const s=this.#E[c];if(e!==s){if(this.#z&&this.#N(s)){s.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:e}=s;if(e!==undefined&&!r){if(this.#D){this.#w?.(e,t,"set")}if(this.#I){this.#O?.push([e,t,"set"])}}}else if(!r){if(this.#D){this.#w?.(s,t,"set")}if(this.#I){this.#O?.push([s,t,"set"])}}this.#Z(c);this.#Y(c,l,a);this.#E[c]=e;if(a){a.set="replace";const t=s&&this.#N(s)?s.__staleWhileFetching:s;if(t!==undefined)a.oldValue=t}}else if(a){a.set="update"}}if(i!==0&&!this.#R){this.#q()}if(this.#R){if(!h){this.#H(c,i,n)}if(a)this.#V(a,c)}if(!r&&this.#I&&this.#O){const t=this.#O;let e;while(e=t?.shift()){this.#b?.(...e)}}return this}pop(){try{while(this.#S){const t=this.#E[this.#M];this.#X(true);if(this.#N(t)){if(t.__staleWhileFetching){return t.__staleWhileFetching}}else if(t!==undefined){return t}}}finally{if(this.#I&&this.#O){const t=this.#O;let e;while(e=t?.shift()){this.#b?.(...e)}}}}#X(t){const e=this.#M;const s=this.#x[e];const i=this.#E[e];if(this.#z&&this.#N(i)){i.__abortController.abort(new Error("evicted"))}else if(this.#D||this.#I){if(this.#D){this.#w?.(i,s,"evict")}if(this.#I){this.#O?.push([i,s,"evict"])}}this.#Z(e);if(t){this.#x[e]=undefined;this.#E[e]=undefined;this.#T.push(e)}if(this.#S===1){this.#M=this.#L=0;this.#T.length=0}else{this.#M=this.#C[e]}this.#k.delete(s);this.#S--;return e}has(t,e={}){const{updateAgeOnHas:s=this.updateAgeOnHas,status:i}=e;const n=this.#k.get(t);if(n!==undefined){const t=this.#E[n];if(this.#N(t)&&t.__staleWhileFetching===undefined){return false}if(!this.#G(n)){if(s){this.#K(n)}if(i){i.has="hit";this.#V(i,n)}return true}else if(i){i.has="stale";this.#V(i,n)}}else if(i){i.has="miss"}return false}peek(t,e={}){const{allowStale:s=this.allowStale}=e;const i=this.#k.get(t);if(i===undefined||!s&&this.#G(i)){return}const n=this.#E[i];return this.#N(n)?n.__staleWhileFetching:n}#B(t,e,s,i){const n=e===undefined?undefined:this.#E[e];if(this.#N(n)){return n}const r=new F;const{signal:o}=s;o?.addEventListener("abort",(()=>r.abort(o.reason)),{signal:r.signal});const a={signal:r.signal,options:s,context:i};const cb=(i,n=false)=>{const{aborted:o}=r.signal;const l=s.ignoreFetchAbort&&i!==undefined;if(s.status){if(o&&!n){s.status.fetchAborted=true;s.status.fetchError=r.signal.reason;if(l)s.status.fetchAbortIgnored=true}else{s.status.fetchResolved=true}}if(o&&!l&&!n){return fetchFail(r.signal.reason)}const c=h;if(this.#E[e]===h){if(i===undefined){if(c.__staleWhileFetching){this.#E[e]=c.__staleWhileFetching}else{this.delete(t)}}else{if(s.status)s.status.fetchUpdated=true;this.set(t,i,a.options)}}return i};const eb=t=>{if(s.status){s.status.fetchRejected=true;s.status.fetchError=t}return fetchFail(t)};const fetchFail=i=>{const{aborted:n}=r.signal;const o=n&&s.allowStaleOnFetchAbort;const a=o||s.allowStaleOnFetchRejection;const l=a||s.noDeleteOnFetchRejection;const c=h;if(this.#E[e]===h){const s=!l||c.__staleWhileFetching===undefined;if(s){this.delete(t)}else if(!o){this.#E[e]=c.__staleWhileFetching}}if(a){if(s.status&&c.__staleWhileFetching!==undefined){s.status.returnedStale=true}return c.__staleWhileFetching}else if(c.__returned===c){throw i}};const pcall=(e,i)=>{const o=this.#_?.(t,n,a);if(o&&o instanceof Promise){o.then((t=>e(t===undefined?undefined:t)),i)}r.signal.addEventListener("abort",(()=>{if(!s.ignoreFetchAbort||s.allowStaleOnFetchAbort){e(undefined);if(s.allowStaleOnFetchAbort){e=t=>cb(t,true)}}}))};if(s.status)s.status.fetchDispatched=true;const h=new Promise(pcall).then(cb,eb);const l=Object.assign(h,{__abortController:r,__staleWhileFetching:n,__returned:undefined});if(e===undefined){this.set(t,l,{...a.options,status:undefined});e=this.#k.get(t)}else{this.#E[e]=l}return l}#N(t){if(!this.#z)return false;const e=t;return!!e&&e instanceof Promise&&e.hasOwnProperty("__staleWhileFetching")&&e.__abortController instanceof F}async fetch(t,e={}){const{allowStale:s=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:n=this.noDeleteOnStaleGet,ttl:r=this.ttl,noDisposeOnSet:o=this.noDisposeOnSet,size:a=0,sizeCalculation:h=this.sizeCalculation,noUpdateTTL:l=this.noUpdateTTL,noDeleteOnFetchRejection:c=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:f=this.allowStaleOnFetchRejection,ignoreFetchAbort:u=this.ignoreFetchAbort,allowStaleOnFetchAbort:p=this.allowStaleOnFetchAbort,context:d,forceRefresh:g=false,status:y,signal:w}=e;if(!this.#z){if(y)y.fetch="get";return this.get(t,{allowStale:s,updateAgeOnGet:i,noDeleteOnStaleGet:n,status:y})}const b={allowStale:s,updateAgeOnGet:i,noDeleteOnStaleGet:n,ttl:r,noDisposeOnSet:o,size:a,sizeCalculation:h,noUpdateTTL:l,noDeleteOnFetchRejection:c,allowStaleOnFetchRejection:f,allowStaleOnFetchAbort:p,ignoreFetchAbort:u,status:y,signal:w};let _=this.#k.get(t);if(_===undefined){if(y)y.fetch="miss";const e=this.#B(t,_,b,d);return e.__returned=e}else{const e=this.#E[_];if(this.#N(e)){const t=s&&e.__staleWhileFetching!==undefined;if(y){y.fetch="inflight";if(t)y.returnedStale=true}return t?e.__staleWhileFetching:e.__returned=e}const n=this.#G(_);if(!g&&!n){if(y)y.fetch="hit";this.#j(_);if(i){this.#K(_)}if(y)this.#V(y,_);return e}const r=this.#B(t,_,b,d);const o=r.__staleWhileFetching!==undefined;const a=o&&s;if(y){y.fetch=n?"stale":"refresh";if(a&&n)y.returnedStale=true}return a?r.__staleWhileFetching:r.__returned=r}}get(t,e={}){const{allowStale:s=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:n=this.noDeleteOnStaleGet,status:r}=e;const o=this.#k.get(t);if(o!==undefined){const e=this.#E[o];const a=this.#N(e);if(r)this.#V(r,o);if(this.#G(o)){if(r)r.get="stale";if(!a){if(!n){this.delete(t)}if(r&&s)r.returnedStale=true;return s?e:undefined}else{if(r&&s&&e.__staleWhileFetching!==undefined){r.returnedStale=true}return s?e.__staleWhileFetching:undefined}}else{if(r)r.get="hit";if(a){return e.__staleWhileFetching}this.#j(o);if(i){this.#K(o)}return e}}else if(r){r.get="miss"}}#tt(t,e){this.#P[e]=t;this.#C[t]=e}#j(t){if(t!==this.#L){if(t===this.#M){this.#M=this.#C[t]}else{this.#tt(this.#P[t],this.#C[t])}this.#tt(this.#L,t);this.#L=t}}delete(t){let e=false;if(this.#S!==0){const s=this.#k.get(t);if(s!==undefined){e=true;if(this.#S===1){this.clear()}else{this.#Z(s);const e=this.#E[s];if(this.#N(e)){e.__abortController.abort(new Error("deleted"))}else if(this.#D||this.#I){if(this.#D){this.#w?.(e,t,"delete")}if(this.#I){this.#O?.push([e,t,"delete"])}}this.#k.delete(t);this.#x[s]=undefined;this.#E[s]=undefined;if(s===this.#L){this.#L=this.#P[s]}else if(s===this.#M){this.#M=this.#C[s]}else{const t=this.#P[s];this.#C[t]=this.#C[s];const e=this.#C[s];this.#P[e]=this.#P[s]}this.#S--;this.#T.push(s)}}}if(this.#I&&this.#O?.length){const t=this.#O;let e;while(e=t?.shift()){this.#b?.(...e)}}return e}clear(){for(const t of this.#U({allowStale:true})){const e=this.#E[t];if(this.#N(e)){e.__abortController.abort(new Error("deleted"))}else{const s=this.#x[t];if(this.#D){this.#w?.(e,s,"delete")}if(this.#I){this.#O?.push([e,s,"delete"])}}}this.#k.clear();this.#E.fill(undefined);this.#x.fill(undefined);if(this.#R&&this.#F){this.#R.fill(0);this.#F.fill(0)}if(this.#A){this.#A.fill(0)}this.#M=0;this.#L=0;this.#T.length=0;this.#v=0;this.#S=0;if(this.#I&&this.#O){const t=this.#O;let e;while(e=t?.shift()){this.#b?.(...e)}}}}var z=s(17);const I=require("url");const N=require("fs");var B=s.t(N,2);const j=require("fs/promises");const W=require("events");const U=require("stream");const G=require("string_decoder");const $=typeof process==="object"&&process?process:{stdout:null,stderr:null};const isStream=t=>!!t&&typeof t==="object"&&(t instanceof Minipass||t instanceof U||isReadable(t)||isWritable(t));const isReadable=t=>!!t&&typeof t==="object"&&t instanceof W.EventEmitter&&typeof t.pipe==="function"&&t.pipe!==U.Writable.prototype.pipe;const isWritable=t=>!!t&&typeof t==="object"&&t instanceof W.EventEmitter&&typeof t.write==="function"&&typeof t.end==="function";const q=Symbol("EOF");const H=Symbol("maybeEmitEnd");const K=Symbol("emittedEnd");const V=Symbol("emittingEnd");const Z=Symbol("emittedError");const J=Symbol("closed");const Y=Symbol("read");const X=Symbol("flush");const Q=Symbol("flushChunk");const tt=Symbol("encoding");const et=Symbol("decoder");const st=Symbol("flowing");const it=Symbol("paused");const nt=Symbol("resume");const rt=Symbol("buffer");const ot=Symbol("pipes");const at=Symbol("bufferLength");const ht=Symbol("bufferPush");const lt=Symbol("bufferShift");const ct=Symbol("objectMode");const ft=Symbol("destroyed");const ut=Symbol("error");const pt=Symbol("emitData");const dt=Symbol("emitEnd");const gt=Symbol("emitEnd2");const mt=Symbol("async");const yt=Symbol("abort");const wt=Symbol("aborted");const bt=Symbol("signal");const _t=Symbol("dataListeners");const St=Symbol("discarded");const defer=t=>Promise.resolve().then(t);const nodefer=t=>t();const isEndish=t=>t==="end"||t==="finish"||t==="prefinish";const isArrayBufferLike=t=>t instanceof ArrayBuffer||!!t&&typeof t==="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0;const isArrayBufferView=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t);class Pipe{src;dest;opts;ondrain;constructor(t,e,s){this.src=t;this.dest=e;this.opts=s;this.ondrain=()=>t[nt]();this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(t){}end(){this.unpipe();if(this.opts.end)this.dest.end()}}class PipeProxyErrors extends Pipe{unpipe(){this.src.removeListener("error",this.proxyErrors);super.unpipe()}constructor(t,e,s){super(t,e,s);this.proxyErrors=t=>e.emit("error",t);t.on("error",this.proxyErrors)}}const isObjectModeOptions=t=>!!t.objectMode;const isEncodingOptions=t=>!t.objectMode&&!!t.encoding&&t.encoding!=="buffer";class Minipass extends W.EventEmitter{[st]=false;[it]=false;[ot]=[];[rt]=[];[ct];[tt];[mt];[et];[q]=false;[K]=false;[V]=false;[J]=false;[Z]=null;[at]=0;[ft]=false;[bt];[wt]=false;[_t]=0;[St]=false;writable=true;readable=true;constructor(...t){const e=t[0]||{};super();if(e.objectMode&&typeof e.encoding==="string"){throw new TypeError("Encoding and objectMode may not be used together")}if(isObjectModeOptions(e)){this[ct]=true;this[tt]=null}else if(isEncodingOptions(e)){this[tt]=e.encoding;this[ct]=false}else{this[ct]=false;this[tt]=null}this[mt]=!!e.async;this[et]=this[tt]?new G.StringDecoder(this[tt]):null;if(e&&e.debugExposeBuffer===true){Object.defineProperty(this,"buffer",{get:()=>this[rt]})}if(e&&e.debugExposePipes===true){Object.defineProperty(this,"pipes",{get:()=>this[ot]})}const{signal:s}=e;if(s){this[bt]=s;if(s.aborted){this[yt]()}else{s.addEventListener("abort",(()=>this[yt]()))}}}get bufferLength(){return this[at]}get encoding(){return this[tt]}set encoding(t){throw new Error("Encoding must be set at instantiation time")}setEncoding(t){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[ct]}set objectMode(t){throw new Error("objectMode must be set at instantiation time")}get["async"](){return this[mt]}set["async"](t){this[mt]=this[mt]||!!t}[yt](){this[wt]=true;this.emit("abort",this[bt]?.reason);this.destroy(this[bt]?.reason)}get aborted(){return this[wt]}set aborted(t){}write(t,e,s){if(this[wt])return false;if(this[q])throw new Error("write after end");if(this[ft]){this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"}));return true}if(typeof e==="function"){s=e;e="utf8"}if(!e)e="utf8";const i=this[mt]?defer:nodefer;if(!this[ct]&&!Buffer.isBuffer(t)){if(isArrayBufferView(t)){t=Buffer.from(t.buffer,t.byteOffset,t.byteLength)}else if(isArrayBufferLike(t)){t=Buffer.from(t)}else if(typeof t!=="string"){throw new Error("Non-contiguous data written to non-objectMode stream")}}if(this[ct]){if(this[st]&&this[at]!==0)this[X](true);if(this[st])this.emit("data",t);else this[ht](t);if(this[at]!==0)this.emit("readable");if(s)i(s);return this[st]}if(!t.length){if(this[at]!==0)this.emit("readable");if(s)i(s);return this[st]}if(typeof t==="string"&&!(e===this[tt]&&!this[et]?.lastNeed)){t=Buffer.from(t,e)}if(Buffer.isBuffer(t)&&this[tt]){t=this[et].write(t)}if(this[st]&&this[at]!==0)this[X](true);if(this[st])this.emit("data",t);else this[ht](t);if(this[at]!==0)this.emit("readable");if(s)i(s);return this[st]}read(t){if(this[ft])return null;this[St]=false;if(this[at]===0||t===0||t&&t>this[at]){this[H]();return null}if(this[ct])t=null;if(this[rt].length>1&&!this[ct]){this[rt]=[this[tt]?this[rt].join(""):Buffer.concat(this[rt],this[at])]}const e=this[Y](t||null,this[rt][0]);this[H]();return e}[Y](t,e){if(this[ct])this[lt]();else{const s=e;if(t===s.length||t===null)this[lt]();else if(typeof s==="string"){this[rt][0]=s.slice(t);e=s.slice(0,t);this[at]-=t}else{this[rt][0]=s.subarray(t);e=s.subarray(0,t);this[at]-=t}}this.emit("data",e);if(!this[rt].length&&!this[q])this.emit("drain");return e}end(t,e,s){if(typeof t==="function"){s=t;t=undefined}if(typeof e==="function"){s=e;e="utf8"}if(t!==undefined)this.write(t,e);if(s)this.once("end",s);this[q]=true;this.writable=false;if(this[st]||!this[it])this[H]();return this}[nt](){if(this[ft])return;if(!this[_t]&&!this[ot].length){this[St]=true}this[it]=false;this[st]=true;this.emit("resume");if(this[rt].length)this[X]();else if(this[q])this[H]();else this.emit("drain")}resume(){return this[nt]()}pause(){this[st]=false;this[it]=true;this[St]=false}get destroyed(){return this[ft]}get flowing(){return this[st]}get paused(){return this[it]}[ht](t){if(this[ct])this[at]+=1;else this[at]+=t.length;this[rt].push(t)}[lt](){if(this[ct])this[at]-=1;else this[at]-=this[rt][0].length;return this[rt].shift()}[X](t=false){do{}while(this[Q](this[lt]())&&this[rt].length);if(!t&&!this[rt].length&&!this[q])this.emit("drain")}[Q](t){this.emit("data",t);return this[st]}pipe(t,e){if(this[ft])return t;this[St]=false;const s=this[K];e=e||{};if(t===$.stdout||t===$.stderr)e.end=false;else e.end=e.end!==false;e.proxyErrors=!!e.proxyErrors;if(s){if(e.end)t.end()}else{this[ot].push(!e.proxyErrors?new Pipe(this,t,e):new PipeProxyErrors(this,t,e));if(this[mt])defer((()=>this[nt]()));else this[nt]()}return t}unpipe(t){const e=this[ot].find((e=>e.dest===t));if(e){if(this[ot].length===1){if(this[st]&&this[_t]===0){this[st]=false}this[ot]=[]}else this[ot].splice(this[ot].indexOf(e),1);e.unpipe()}}addListener(t,e){return this.on(t,e)}on(t,e){const s=super.on(t,e);if(t==="data"){this[St]=false;this[_t]++;if(!this[ot].length&&!this[st]){this[nt]()}}else if(t==="readable"&&this[at]!==0){super.emit("readable")}else if(isEndish(t)&&this[K]){super.emit(t);this.removeAllListeners(t)}else if(t==="error"&&this[Z]){const t=e;if(this[mt])defer((()=>t.call(this,this[Z])));else t.call(this,this[Z])}return s}removeListener(t,e){return this.off(t,e)}off(t,e){const s=super.off(t,e);if(t==="data"){this[_t]=this.listeners("data").length;if(this[_t]===0&&!this[St]&&!this[ot].length){this[st]=false}}return s}removeAllListeners(t){const e=super.removeAllListeners(t);if(t==="data"||t===undefined){this[_t]=0;if(!this[St]&&!this[ot].length){this[st]=false}}return e}get emittedEnd(){return this[K]}[H](){if(!this[V]&&!this[K]&&!this[ft]&&this[rt].length===0&&this[q]){this[V]=true;this.emit("end");this.emit("prefinish");this.emit("finish");if(this[J])this.emit("close");this[V]=false}}emit(t,...e){const s=e[0];if(t!=="error"&&t!=="close"&&t!==ft&&this[ft]){return false}else if(t==="data"){return!this[ct]&&!s?false:this[mt]?(defer((()=>this[pt](s))),true):this[pt](s)}else if(t==="end"){return this[dt]()}else if(t==="close"){this[J]=true;if(!this[K]&&!this[ft])return false;const t=super.emit("close");this.removeAllListeners("close");return t}else if(t==="error"){this[Z]=s;super.emit(ut,s);const t=!this[bt]||this.listeners("error").length?super.emit("error",s):false;this[H]();return t}else if(t==="resume"){const t=super.emit("resume");this[H]();return t}else if(t==="finish"||t==="prefinish"){const e=super.emit(t);this.removeAllListeners(t);return e}const i=super.emit(t,...e);this[H]();return i}[pt](t){for(const e of this[ot]){if(e.dest.write(t)===false)this.pause()}const e=this[St]?false:super.emit("data",t);this[H]();return e}[dt](){if(this[K])return false;this[K]=true;this.readable=false;return this[mt]?(defer((()=>this[gt]())),true):this[gt]()}[gt](){if(this[et]){const t=this[et].end();if(t){for(const e of this[ot]){e.dest.write(t)}if(!this[St])super.emit("data",t)}}for(const t of this[ot]){t.end()}const t=super.emit("end");this.removeAllListeners("end");return t}async collect(){const t=Object.assign([],{dataLength:0});if(!this[ct])t.dataLength=0;const e=this.promise();this.on("data",(e=>{t.push(e);if(!this[ct])t.dataLength+=e.length}));await e;return t}async concat(){if(this[ct]){throw new Error("cannot concat in objectMode")}const t=await this.collect();return this[tt]?t.join(""):Buffer.concat(t,t.dataLength)}async promise(){return new Promise(((t,e)=>{this.on(ft,(()=>e(new Error("stream destroyed"))));this.on("error",(t=>e(t)));this.on("end",(()=>t()))}))}[Symbol.asyncIterator](){this[St]=false;let t=false;const stop=async()=>{this.pause();t=true;return{value:undefined,done:true}};const next=()=>{if(t)return stop();const e=this.read();if(e!==null)return Promise.resolve({done:false,value:e});if(this[q])return stop();let s;let i;const onerr=t=>{this.off("data",ondata);this.off("end",onend);this.off(ft,ondestroy);stop();i(t)};const ondata=t=>{this.off("error",onerr);this.off("end",onend);this.off(ft,ondestroy);this.pause();s({value:t,done:!!this[q]})};const onend=()=>{this.off("error",onerr);this.off("data",ondata);this.off(ft,ondestroy);stop();s({done:true,value:undefined})};const ondestroy=()=>onerr(new Error("stream destroyed"));return new Promise(((t,e)=>{i=e;s=t;this.once(ft,ondestroy);this.once("error",onerr);this.once("end",onend);this.once("data",ondata)}))};return{next:next,throw:stop,return:stop,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[St]=false;let t=false;const stop=()=>{this.pause();this.off(ut,stop);this.off(ft,stop);this.off("end",stop);t=true;return{done:true,value:undefined}};const next=()=>{if(t)return stop();const e=this.read();return e===null?stop():{done:false,value:e}};this.once("end",stop);this.once(ut,stop);this.once(ft,stop);return{next:next,throw:stop,return:stop,[Symbol.iterator](){return this}}}destroy(t){if(this[ft]){if(t)this.emit("error",t);else this.emit(ft);return this}this[ft]=true;this[St]=true;this[rt].length=0;this[at]=0;const e=this;if(typeof e.close==="function"&&!this[J])e.close();if(t)this.emit("error",t);else this.emit(ft);return this}static get isStream(){return isStream}}const vt=N.realpathSync.native;const kt={lstatSync:N.lstatSync,readdir:N.readdir,readdirSync:N.readdirSync,readlinkSync:N.readlinkSync,realpathSync:vt,promises:{lstat:j.lstat,readdir:j.readdir,readlink:j.readlink,realpath:j.realpath}};const fsFromOption=t=>!t||t===kt||t===B?kt:{...kt,...t,promises:{...kt.promises,...t.promises||{}}};const xt=/^\\\\\?\\([a-z]:)\\?$/i;const uncToDrive=t=>t.replace(/\//g,"\\").replace(xt,"$1\\");const Et=/[\\\/]/;const Ct=0;const Pt=1;const Mt=2;const Lt=4;const Tt=6;const Ot=8;const At=10;const Ft=12;const Rt=15;const Dt=~Rt;const zt=16;const It=32;const Nt=64;const Bt=128;const jt=256;const Wt=512;const Ut=Nt|Bt|Wt;const Gt=1023;const entToType=t=>t.isFile()?Ot:t.isDirectory()?Lt:t.isSymbolicLink()?At:t.isCharacterDevice()?Mt:t.isBlockDevice()?Tt:t.isSocket()?Ft:t.isFIFO()?Pt:Ct;const $t=new Map;const normalize=t=>{const e=$t.get(t);if(e)return e;const s=t.normalize("NFKD");$t.set(t,s);return s};const qt=new Map;const normalizeNocase=t=>{const e=qt.get(t);if(e)return e;const s=normalize(t.toLowerCase());qt.set(t,s);return s};class ResolveCache extends LRUCache{constructor(){super({max:256})}}class ChildrenCache extends LRUCache{constructor(t=16*1024){super({maxSize:t,sizeCalculation:t=>t.length+1})}}const Ht=Symbol("PathScurry setAsCwd");class PathBase{name;root;roots;parent;nocase;#et;#st;get dev(){return this.#st}#it;get mode(){return this.#it}#nt;get nlink(){return this.#nt}#rt;get uid(){return this.#rt}#ot;get gid(){return this.#ot}#at;get rdev(){return this.#at}#ht;get blksize(){return this.#ht}#lt;get ino(){return this.#lt}#S;get size(){return this.#S}#ct;get blocks(){return this.#ct}#ft;get atimeMs(){return this.#ft}#ut;get mtimeMs(){return this.#ut}#pt;get ctimeMs(){return this.#pt}#dt;get birthtimeMs(){return this.#dt}#gt;get atime(){return this.#gt}#mt;get mtime(){return this.#mt}#yt;get ctime(){return this.#yt}#wt;get birthtime(){return this.#wt}#bt;#_t;#St;#vt;#kt;#xt;#Et;#Ct;#Pt;#Mt;get path(){return(this.parent||this).fullpath()}constructor(t,e=Ct,s,i,n,r,o){this.name=t;this.#bt=n?normalizeNocase(t):normalize(t);this.#Et=e&Gt;this.nocase=n;this.roots=i;this.root=s||this;this.#Ct=r;this.#St=o.fullpath;this.#kt=o.relative;this.#xt=o.relativePosix;this.parent=o.parent;if(this.parent){this.#et=this.parent.#et}else{this.#et=fsFromOption(o.fs)}}depth(){if(this.#_t!==undefined)return this.#_t;if(!this.parent)return this.#_t=0;return this.#_t=this.parent.depth()+1}childrenCache(){return this.#Ct}resolve(t){if(!t){return this}const e=this.getRootString(t);const s=t.substring(e.length);const i=s.split(this.splitSep);const n=e?this.getRoot(e).#Lt(i):this.#Lt(i);return n}#Lt(t){let e=this;for(const s of t){e=e.child(s)}return e}children(){const t=this.#Ct.get(this);if(t){return t}const e=Object.assign([],{provisional:0});this.#Ct.set(this,e);this.#Et&=~zt;return e}child(t,e){if(t===""||t==="."){return this}if(t===".."){return this.parent||this}const s=this.children();const i=this.nocase?normalizeNocase(t):normalize(t);for(const t of s){if(t.#bt===i){return t}}const n=this.parent?this.sep:"";const r=this.#St?this.#St+n+t:undefined;const o=this.newChild(t,Ct,{...e,parent:this,fullpath:r});if(!this.canReaddir()){o.#Et|=Bt}s.push(o);return o}relative(){if(this.#kt!==undefined){return this.#kt}const t=this.name;const e=this.parent;if(!e){return this.#kt=this.name}const s=e.relative();return s+(!s||!e.parent?"":this.sep)+t}relativePosix(){if(this.sep==="/")return this.relative();if(this.#xt!==undefined)return this.#xt;const t=this.name;const e=this.parent;if(!e){return this.#xt=this.fullpathPosix()}const s=e.relativePosix();return s+(!s||!e.parent?"":"/")+t}fullpath(){if(this.#St!==undefined){return this.#St}const t=this.name;const e=this.parent;if(!e){return this.#St=this.name}const s=e.fullpath();const i=s+(!e.parent?"":this.sep)+t;return this.#St=i}fullpathPosix(){if(this.#vt!==undefined)return this.#vt;if(this.sep==="/")return this.#vt=this.fullpath();if(!this.parent){const t=this.fullpath().replace(/\\/g,"/");if(/^[a-z]:\//i.test(t)){return this.#vt=`//?/${t}`}else{return this.#vt=t}}const t=this.parent;const e=t.fullpathPosix();const s=e+(!e||!t.parent?"":"/")+this.name;return this.#vt=s}isUnknown(){return(this.#Et&Rt)===Ct}isType(t){return this[`is${t}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#Et&Rt)===Ot}isDirectory(){return(this.#Et&Rt)===Lt}isCharacterDevice(){return(this.#Et&Rt)===Mt}isBlockDevice(){return(this.#Et&Rt)===Tt}isFIFO(){return(this.#Et&Rt)===Pt}isSocket(){return(this.#Et&Rt)===Ft}isSymbolicLink(){return(this.#Et&At)===At}lstatCached(){return this.#Et&It?this:undefined}readlinkCached(){return this.#Pt}realpathCached(){return this.#Mt}readdirCached(){const t=this.children();return t.slice(0,t.provisional)}canReadlink(){if(this.#Pt)return true;if(!this.parent)return false;const t=this.#Et&Rt;return!(t!==Ct&&t!==At||this.#Et&jt||this.#Et&Bt)}calledReaddir(){return!!(this.#Et&zt)}isENOENT(){return!!(this.#Et&Bt)}isNamed(t){return!this.nocase?this.#bt===normalize(t):this.#bt===normalizeNocase(t)}async readlink(){const t=this.#Pt;if(t){return t}if(!this.canReadlink()){return undefined}if(!this.parent){return undefined}try{const t=await this.#et.promises.readlink(this.fullpath());const e=(await this.parent.realpath())?.resolve(t);if(e){return this.#Pt=e}}catch(t){this.#Tt(t.code);return undefined}}readlinkSync(){const t=this.#Pt;if(t){return t}if(!this.canReadlink()){return undefined}if(!this.parent){return undefined}try{const t=this.#et.readlinkSync(this.fullpath());const e=this.parent.realpathSync()?.resolve(t);if(e){return this.#Pt=e}}catch(t){this.#Tt(t.code);return undefined}}#Ot(t){this.#Et|=zt;for(let e=t.provisional;e<t.length;e++){const s=t[e];if(s)s.#At()}}#At(){if(this.#Et&Bt)return;this.#Et=(this.#Et|Bt)&Dt;this.#Ft()}#Ft(){const t=this.children();t.provisional=0;for(const e of t){e.#At()}}#Rt(){this.#Et|=Wt;this.#Dt()}#Dt(){if(this.#Et&Nt)return;let t=this.#Et;if((t&Rt)===Lt)t&=Dt;this.#Et=t|Nt;this.#Ft()}#zt(t=""){if(t==="ENOTDIR"||t==="EPERM"){this.#Dt()}else if(t==="ENOENT"){this.#At()}else{this.children().provisional=0}}#It(t=""){if(t==="ENOTDIR"){const t=this.parent;t.#Dt()}else if(t==="ENOENT"){this.#At()}}#Tt(t=""){let e=this.#Et;e|=jt;if(t==="ENOENT")e|=Bt;if(t==="EINVAL"||t==="UNKNOWN"){e&=Dt}this.#Et=e;if(t==="ENOTDIR"&&this.parent){this.parent.#Dt()}}#Nt(t,e){return this.#Bt(t,e)||this.#jt(t,e)}#jt(t,e){const s=entToType(t);const i=this.newChild(t.name,s,{parent:this});const n=i.#Et&Rt;if(n!==Lt&&n!==At&&n!==Ct){i.#Et|=Nt}e.unshift(i);e.provisional++;return i}#Bt(t,e){for(let s=e.provisional;s<e.length;s++){const i=e[s];const n=this.nocase?normalizeNocase(t.name):normalize(t.name);if(n!==i.#bt){continue}return this.#Wt(t,i,s,e)}}#Wt(t,e,s,i){const n=e.name;e.#Et=e.#Et&Dt|entToType(t);if(n!==t.name)e.name=t.name;if(s!==i.provisional){if(s===i.length-1)i.pop();else i.splice(s,1);i.unshift(e)}i.provisional++;return e}async lstat(){if((this.#Et&Bt)===0){try{this.#Ut(await this.#et.promises.lstat(this.fullpath()));return this}catch(t){this.#It(t.code)}}}lstatSync(){if((this.#Et&Bt)===0){try{this.#Ut(this.#et.lstatSync(this.fullpath()));return this}catch(t){this.#It(t.code)}}}#Ut(t){const{atime:e,atimeMs:s,birthtime:i,birthtimeMs:n,blksize:r,blocks:o,ctime:a,ctimeMs:h,dev:l,gid:c,ino:f,mode:u,mtime:p,mtimeMs:d,nlink:g,rdev:y,size:w,uid:b}=t;this.#gt=e;this.#ft=s;this.#wt=i;this.#dt=n;this.#ht=r;this.#ct=o;this.#yt=a;this.#pt=h;this.#st=l;this.#ot=c;this.#lt=f;this.#it=u;this.#mt=p;this.#ut=d;this.#nt=g;this.#at=y;this.#S=w;this.#rt=b;const _=entToType(t);this.#Et=this.#Et&Dt|_|It;if(_!==Ct&&_!==Lt&&_!==At){this.#Et|=Nt}}#Gt=[];#$t=false;#qt(t){this.#$t=false;const e=this.#Gt.slice();this.#Gt.length=0;e.forEach((e=>e(null,t)))}readdirCB(t,e=false){if(!this.canReaddir()){if(e)t(null,[]);else queueMicrotask((()=>t(null,[])));return}const s=this.children();if(this.calledReaddir()){const i=s.slice(0,s.provisional);if(e)t(null,i);else queueMicrotask((()=>t(null,i)));return}this.#Gt.push(t);if(this.#$t){return}this.#$t=true;const i=this.fullpath();this.#et.readdir(i,{withFileTypes:true},((t,e)=>{if(t){this.#zt(t.code);s.provisional=0}else{for(const t of e){this.#Nt(t,s)}this.#Ot(s)}this.#qt(s.slice(0,s.provisional));return}))}#Ht;async readdir(){if(!this.canReaddir()){return[]}const t=this.children();if(this.calledReaddir()){return t.slice(0,t.provisional)}const e=this.fullpath();if(this.#Ht){await this.#Ht}else{let resolve=()=>{};this.#Ht=new Promise((t=>resolve=t));try{for(const s of await this.#et.promises.readdir(e,{withFileTypes:true})){this.#Nt(s,t)}this.#Ot(t)}catch(e){this.#zt(e.code);t.provisional=0}this.#Ht=undefined;resolve()}return t.slice(0,t.provisional)}readdirSync(){if(!this.canReaddir()){return[]}const t=this.children();if(this.calledReaddir()){return t.slice(0,t.provisional)}const e=this.fullpath();try{for(const s of this.#et.readdirSync(e,{withFileTypes:true})){this.#Nt(s,t)}this.#Ot(t)}catch(e){this.#zt(e.code);t.provisional=0}return t.slice(0,t.provisional)}canReaddir(){if(this.#Et&Ut)return false;const t=Rt&this.#Et;if(!(t===Ct||t===Lt||t===At)){return false}return true}shouldWalk(t,e){return(this.#Et&Lt)===Lt&&!(this.#Et&Ut)&&!t.has(this)&&(!e||e(this))}async realpath(){if(this.#Mt)return this.#Mt;if((Wt|jt|Bt)&this.#Et)return undefined;try{const t=await this.#et.promises.realpath(this.fullpath());return this.#Mt=this.resolve(t)}catch(t){this.#Rt()}}realpathSync(){if(this.#Mt)return this.#Mt;if((Wt|jt|Bt)&this.#Et)return undefined;try{const t=this.#et.realpathSync(this.fullpath());return this.#Mt=this.resolve(t)}catch(t){this.#Rt()}}[Ht](t){if(t===this)return;const e=new Set([]);let s=[];let i=this;while(i&&i.parent){e.add(i);i.#kt=s.join(this.sep);i.#xt=s.join("/");i=i.parent;s.push("..")}i=t;while(i&&i.parent&&!e.has(i)){i.#kt=undefined;i.#xt=undefined;i=i.parent}}}class PathWin32 extends PathBase{sep="\\";splitSep=Et;constructor(t,e=Ct,s,i,n,r,o){super(t,e,s,i,n,r,o)}newChild(t,e=Ct,s={}){return new PathWin32(t,e,this.root,this.roots,this.nocase,this.childrenCache(),s)}getRootString(t){return z.win32.parse(t).root}getRoot(t){t=uncToDrive(t.toUpperCase());if(t===this.root.name){return this.root}for(const[e,s]of Object.entries(this.roots)){if(this.sameRoot(t,e)){return this.roots[t]=s}}return this.roots[t]=new PathScurryWin32(t,this).root}sameRoot(t,e=this.root.name){t=t.toUpperCase().replace(/\//g,"\\").replace(xt,"$1\\");return t===e}}class PathPosix extends PathBase{splitSep="/";sep="/";constructor(t,e=Ct,s,i,n,r,o){super(t,e,s,i,n,r,o)}getRootString(t){return t.startsWith("/")?"/":""}getRoot(t){return this.root}newChild(t,e=Ct,s={}){return new PathPosix(t,e,this.root,this.roots,this.nocase,this.childrenCache(),s)}}class PathScurryBase{root;rootPath;roots;cwd;#Kt;#Vt;#Ct;nocase;#et;constructor(t=process.cwd(),e,s,{nocase:i,childrenCacheSize:n=16*1024,fs:r=kt}={}){this.#et=fsFromOption(r);if(t instanceof URL||t.startsWith("file://")){t=(0,I.fileURLToPath)(t)}const o=e.resolve(t);this.roots=Object.create(null);this.rootPath=this.parseRootPath(o);this.#Kt=new ResolveCache;this.#Vt=new ResolveCache;this.#Ct=new ChildrenCache(n);const a=o.substring(this.rootPath.length).split(s);if(a.length===1&&!a[0]){a.pop()}if(i===undefined){throw new TypeError("must provide nocase setting to PathScurryBase ctor")}this.nocase=i;this.root=this.newRoot(this.#et);this.roots[this.rootPath]=this.root;let h=this.root;let l=a.length-1;const c=e.sep;let f=this.rootPath;let u=false;for(const t of a){const e=l--;h=h.child(t,{relative:new Array(e).fill("..").join(c),relativePosix:new Array(e).fill("..").join("/"),fullpath:f+=(u?"":c)+t});u=true}this.cwd=h}depth(t=this.cwd){if(typeof t==="string"){t=this.cwd.resolve(t)}return t.depth()}childrenCache(){return this.#Ct}resolve(...t){let e="";for(let s=t.length-1;s>=0;s--){const i=t[s];if(!i||i===".")continue;e=e?`${i}/${e}`:i;if(this.isAbsolute(i)){break}}const s=this.#Kt.get(e);if(s!==undefined){return s}const i=this.cwd.resolve(e).fullpath();this.#Kt.set(e,i);return i}resolvePosix(...t){let e="";for(let s=t.length-1;s>=0;s--){const i=t[s];if(!i||i===".")continue;e=e?`${i}/${e}`:i;if(this.isAbsolute(i)){break}}const s=this.#Vt.get(e);if(s!==undefined){return s}const i=this.cwd.resolve(e).fullpathPosix();this.#Vt.set(e,i);return i}relative(t=this.cwd){if(typeof t==="string"){t=this.cwd.resolve(t)}return t.relative()}relativePosix(t=this.cwd){if(typeof t==="string"){t=this.cwd.resolve(t)}return t.relativePosix()}basename(t=this.cwd){if(typeof t==="string"){t=this.cwd.resolve(t)}return t.name}dirname(t=this.cwd){if(typeof t==="string"){t=this.cwd.resolve(t)}return(t.parent||t).fullpath()}async readdir(t=this.cwd,e={withFileTypes:true}){if(typeof t==="string"){t=this.cwd.resolve(t)}else if(!(t instanceof PathBase)){e=t;t=this.cwd}const{withFileTypes:s}=e;if(!t.canReaddir()){return[]}else{const e=await t.readdir();return s?e:e.map((t=>t.name))}}readdirSync(t=this.cwd,e={withFileTypes:true}){if(typeof t==="string"){t=this.cwd.resolve(t)}else if(!(t instanceof PathBase)){e=t;t=this.cwd}const{withFileTypes:s=true}=e;if(!t.canReaddir()){return[]}else if(s){return t.readdirSync()}else{return t.readdirSync().map((t=>t.name))}}async lstat(t=this.cwd){if(typeof t==="string"){t=this.cwd.resolve(t)}return t.lstat()}lstatSync(t=this.cwd){if(typeof t==="string"){t=this.cwd.resolve(t)}return t.lstatSync()}async readlink(t=this.cwd,{withFileTypes:e}={withFileTypes:false}){if(typeof t==="string"){t=this.cwd.resolve(t)}else if(!(t instanceof PathBase)){e=t.withFileTypes;t=this.cwd}const s=await t.readlink();return e?s:s?.fullpath()}readlinkSync(t=this.cwd,{withFileTypes:e}={withFileTypes:false}){if(typeof t==="string"){t=this.cwd.resolve(t)}else if(!(t instanceof PathBase)){e=t.withFileTypes;t=this.cwd}const s=t.readlinkSync();return e?s:s?.fullpath()}async realpath(t=this.cwd,{withFileTypes:e}={withFileTypes:false}){if(typeof t==="string"){t=this.cwd.resolve(t)}else if(!(t instanceof PathBase)){e=t.withFileTypes;t=this.cwd}const s=await t.realpath();return e?s:s?.fullpath()}realpathSync(t=this.cwd,{withFileTypes:e}={withFileTypes:false}){if(typeof t==="string"){t=this.cwd.resolve(t)}else if(!(t instanceof PathBase)){e=t.withFileTypes;t=this.cwd}const s=t.realpathSync();return e?s:s?.fullpath()}async walk(t=this.cwd,e={}){if(typeof t==="string"){t=this.cwd.resolve(t)}else if(!(t instanceof PathBase)){e=t;t=this.cwd}const{withFileTypes:s=true,follow:i=false,filter:n,walkFilter:r}=e;const o=[];if(!n||n(t)){o.push(s?t:t.fullpath())}const a=new Set;const walk=(t,e)=>{a.add(t);t.readdirCB(((t,h)=>{if(t){return e(t)}let l=h.length;if(!l)return e();const next=()=>{if(--l===0){e()}};for(const t of h){if(!n||n(t)){o.push(s?t:t.fullpath())}if(i&&t.isSymbolicLink()){t.realpath().then((t=>t?.isUnknown()?t.lstat():t)).then((t=>t?.shouldWalk(a,r)?walk(t,next):next()))}else{if(t.shouldWalk(a,r)){walk(t,next)}else{next()}}}}),true)};const h=t;return new Promise(((t,e)=>{walk(h,(s=>{if(s)return e(s);t(o)}))}))}walkSync(t=this.cwd,e={}){if(typeof t==="string"){t=this.cwd.resolve(t)}else if(!(t instanceof PathBase)){e=t;t=this.cwd}const{withFileTypes:s=true,follow:i=false,filter:n,walkFilter:r}=e;const o=[];if(!n||n(t)){o.push(s?t:t.fullpath())}const a=new Set([t]);for(const t of a){const e=t.readdirSync();for(const t of e){if(!n||n(t)){o.push(s?t:t.fullpath())}let e=t;if(t.isSymbolicLink()){if(!(i&&(e=t.realpathSync())))continue;if(e.isUnknown())e.lstatSync()}if(e.shouldWalk(a,r)){a.add(e)}}}return o}[Symbol.asyncIterator](){return this.iterate()}iterate(t=this.cwd,e={}){if(typeof t==="string"){t=this.cwd.resolve(t)}else if(!(t instanceof PathBase)){e=t;t=this.cwd}return this.stream(t,e)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(t=this.cwd,e={}){if(typeof t==="string"){t=this.cwd.resolve(t)}else if(!(t instanceof PathBase)){e=t;t=this.cwd}const{withFileTypes:s=true,follow:i=false,filter:n,walkFilter:r}=e;if(!n||n(t)){yield s?t:t.fullpath()}const o=new Set([t]);for(const t of o){const e=t.readdirSync();for(const t of e){if(!n||n(t)){yield s?t:t.fullpath()}let e=t;if(t.isSymbolicLink()){if(!(i&&(e=t.realpathSync())))continue;if(e.isUnknown())e.lstatSync()}if(e.shouldWalk(o,r)){o.add(e)}}}}stream(t=this.cwd,e={}){if(typeof t==="string"){t=this.cwd.resolve(t)}else if(!(t instanceof PathBase)){e=t;t=this.cwd}const{withFileTypes:s=true,follow:i=false,filter:n,walkFilter:r}=e;const o=new Minipass({objectMode:true});if(!n||n(t)){o.write(s?t:t.fullpath())}const a=new Set;const h=[t];let l=0;const process=()=>{let t=false;while(!t){const e=h.shift();if(!e){if(l===0)o.end();return}l++;a.add(e);const onReaddir=(e,f,u=false)=>{if(e)return o.emit("error",e);if(i&&!u){const t=[];for(const e of f){if(e.isSymbolicLink()){t.push(e.realpath().then((t=>t?.isUnknown()?t.lstat():t)))}}if(t.length){Promise.all(t).then((()=>onReaddir(null,f,true)));return}}for(const e of f){if(e&&(!n||n(e))){if(!o.write(s?e:e.fullpath())){t=true}}}l--;for(const t of f){const e=t.realpathCached()||t;if(e.shouldWalk(a,r)){h.push(e)}}if(t&&!o.flowing){o.once("drain",process)}else if(!c){process()}};let c=true;e.readdirCB(onReaddir,true);c=false}};process();return o}streamSync(t=this.cwd,e={}){if(typeof t==="string"){t=this.cwd.resolve(t)}else if(!(t instanceof PathBase)){e=t;t=this.cwd}const{withFileTypes:s=true,follow:i=false,filter:n,walkFilter:r}=e;const o=new Minipass({objectMode:true});const a=new Set;if(!n||n(t)){o.write(s?t:t.fullpath())}const h=[t];let l=0;const process=()=>{let t=false;while(!t){const e=h.shift();if(!e){if(l===0)o.end();return}l++;a.add(e);const c=e.readdirSync();for(const e of c){if(!n||n(e)){if(!o.write(s?e:e.fullpath())){t=true}}}l--;for(const t of c){let e=t;if(t.isSymbolicLink()){if(!(i&&(e=t.realpathSync())))continue;if(e.isUnknown())e.lstatSync()}if(e.shouldWalk(a,r)){h.push(e)}}}if(t&&!o.flowing)o.once("drain",process)};process();return o}chdir(t=this.cwd){const e=this.cwd;this.cwd=typeof t==="string"?this.cwd.resolve(t):t;this.cwd[Ht](e)}}class PathScurryWin32 extends PathScurryBase{sep="\\";constructor(t=process.cwd(),e={}){const{nocase:s=true}=e;super(t,z.win32,"\\",{...e,nocase:s});this.nocase=s;for(let t=this.cwd;t;t=t.parent){t.nocase=this.nocase}}parseRootPath(t){return z.win32.parse(t).root.toUpperCase()}newRoot(t){return new PathWin32(this.rootPath,Lt,undefined,this.roots,this.nocase,this.childrenCache(),{fs:t})}isAbsolute(t){return t.startsWith("/")||t.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(t)}}class PathScurryPosix extends PathScurryBase{sep="/";constructor(t=process.cwd(),e={}){const{nocase:s=false}=e;super(t,z.posix,"/",{...e,nocase:s});this.nocase=s}parseRootPath(t){return"/"}newRoot(t){return new PathPosix(this.rootPath,Lt,undefined,this.roots,this.nocase,this.childrenCache(),{fs:t})}isAbsolute(t){return t.startsWith("/")}}class PathScurryDarwin extends PathScurryPosix{constructor(t=process.cwd(),e={}){const{nocase:s=true}=e;super(t,{...e,nocase:s})}}const Kt=process.platform==="win32"?PathWin32:PathPosix;const Vt=process.platform==="win32"?PathScurryWin32:process.platform==="darwin"?PathScurryDarwin:PathScurryPosix;const isPatternList=t=>t.length>=1;const isGlobList=t=>t.length>=1;class Pattern{#Zt;#Jt;#Yt;length;#Xt;#Qt;#te;#ee;#se;#ie;#ne=true;constructor(t,e,s,i){if(!isPatternList(t)){throw new TypeError("empty pattern list")}if(!isGlobList(e)){throw new TypeError("empty glob list")}if(e.length!==t.length){throw new TypeError("mismatched pattern list and glob list lengths")}this.length=t.length;if(s<0||s>=this.length){throw new TypeError("index out of range")}this.#Zt=t;this.#Jt=e;this.#Yt=s;this.#Xt=i;if(this.#Yt===0){if(this.isUNC()){const[t,e,s,i,...n]=this.#Zt;const[r,o,a,h,...l]=this.#Jt;if(n[0]===""){n.shift();l.shift()}const c=[t,e,s,i,""].join("/");const f=[r,o,a,h,""].join("/");this.#Zt=[c,...n];this.#Jt=[f,...l];this.length=this.#Zt.length}else if(this.isDrive()||this.isAbsolute()){const[t,...e]=this.#Zt;const[s,...i]=this.#Jt;if(e[0]===""){e.shift();i.shift()}const n=t+"/";const r=s+"/";this.#Zt=[n,...e];this.#Jt=[r,...i];this.length=this.#Zt.length}}}pattern(){return this.#Zt[this.#Yt]}isString(){return typeof this.#Zt[this.#Yt]==="string"}isGlobstar(){return this.#Zt[this.#Yt]===x}isRegExp(){return this.#Zt[this.#Yt]instanceof RegExp}globString(){return this.#te=this.#te||(this.#Yt===0?this.isAbsolute()?this.#Jt[0]+this.#Jt.slice(1).join("/"):this.#Jt.join("/"):this.#Jt.slice(this.#Yt).join("/"))}hasMore(){return this.length>this.#Yt+1}rest(){if(this.#Qt!==undefined)return this.#Qt;if(!this.hasMore())return this.#Qt=null;this.#Qt=new Pattern(this.#Zt,this.#Jt,this.#Yt+1,this.#Xt);this.#Qt.#ie=this.#ie;this.#Qt.#se=this.#se;this.#Qt.#ee=this.#ee;return this.#Qt}isUNC(){const t=this.#Zt;return this.#se!==undefined?this.#se:this.#se=this.#Xt==="win32"&&this.#Yt===0&&t[0]===""&&t[1]===""&&typeof t[2]==="string"&&!!t[2]&&typeof t[3]==="string"&&!!t[3]}isDrive(){const t=this.#Zt;return this.#ee!==undefined?this.#ee:this.#ee=this.#Xt==="win32"&&this.#Yt===0&&this.length>1&&typeof t[0]==="string"&&/^[a-z]:$/i.test(t[0])}isAbsolute(){const t=this.#Zt;return this.#ie!==undefined?this.#ie:this.#ie=t[0]===""&&t.length>1||this.isDrive()||this.isUNC()}root(){const t=this.#Zt[0];return typeof t==="string"&&this.isAbsolute()&&this.#Yt===0?t:""}checkFollowGlobstar(){return!(this.#Yt===0||!this.isGlobstar()||!this.#ne)}markFollowGlobstar(){if(this.#Yt===0||!this.isGlobstar()||!this.#ne)return false;this.#ne=false;return true}}const Zt=typeof process==="object"&&process&&typeof process.platform==="string"?process.platform:"linux";class Ignore{relative;relativeChildren;absolute;absoluteChildren;constructor(t,{nobrace:e,nocase:s,noext:i,noglobstar:n,platform:r=Zt}){this.relative=[];this.absolute=[];this.relativeChildren=[];this.absoluteChildren=[];const o={dot:true,nobrace:e,nocase:s,noext:i,noglobstar:n,optimizationLevel:2,platform:r,nocomment:true,nonegate:true};for(const e of t){const t=new Minimatch(e,o);for(let e=0;e<t.set.length;e++){const s=t.set[e];const i=t.globParts[e];if(!s||!i){throw new Error("invalid pattern object")}while(s[0]==="."&&i[0]==="."){s.shift();i.shift()}const n=new Pattern(s,i,0,r);const a=new Minimatch(n.globString(),o);const h=i[i.length-1]==="**";const l=n.isAbsolute();if(l)this.absolute.push(a);else this.relative.push(a);if(h){if(l)this.absoluteChildren.push(a);else this.relativeChildren.push(a)}}}}ignored(t){const e=t.fullpath();const s=`${e}/`;const i=t.relative()||".";const n=`${i}/`;for(const t of this.relative){if(t.match(i)||t.match(n))return true}for(const t of this.absolute){if(t.match(e)||t.match(s))return true}return false}childrenIgnored(t){const e=t.fullpath()+"/";const s=(t.relative()||".")+"/";for(const t of this.relativeChildren){if(t.match(s))return true}for(const t of this.absoluteChildren){if(t.match(e))return true}return false}}class HasWalkedCache{store;constructor(t=new Map){this.store=t}copy(){return new HasWalkedCache(new Map(this.store))}hasWalked(t,e){return this.store.get(t.fullpath())?.has(e.globString())}storeWalked(t,e){const s=t.fullpath();const i=this.store.get(s);if(i)i.add(e.globString());else this.store.set(s,new Set([e.globString()]))}}class MatchRecord{store=new Map;add(t,e,s){const i=(e?2:0)|(s?1:0);const n=this.store.get(t);this.store.set(t,n===undefined?i:i&n)}entries(){return[...this.store.entries()].map((([t,e])=>[t,!!(e&2),!!(e&1)]))}}class SubWalks{store=new Map;add(t,e){if(!t.canReaddir()){return}const s=this.store.get(t);if(s){if(!s.find((t=>t.globString()===e.globString()))){s.push(e)}}else this.store.set(t,[e])}get(t){const e=this.store.get(t);if(!e){throw new Error("attempting to walk unknown path")}return e}entries(){return this.keys().map((t=>[t,this.store.get(t)]))}keys(){return[...this.store.keys()].filter((t=>t.canReaddir()))}}class Processor{hasWalkedCache;matches=new MatchRecord;subwalks=new SubWalks;patterns;follow;dot;opts;constructor(t,e){this.opts=t;this.follow=!!t.follow;this.dot=!!t.dot;this.hasWalkedCache=e?e.copy():new HasWalkedCache}processPatterns(t,e){this.patterns=e;const s=e.map((e=>[t,e]));for(let[t,e]of s){this.hasWalkedCache.storeWalked(t,e);const s=e.root();const i=e.isAbsolute()&&this.opts.absolute!==false;if(s){t=t.resolve(s==="/"&&this.opts.root!==undefined?this.opts.root:s);const i=e.rest();if(!i){this.matches.add(t,true,false);continue}else{e=i}}if(t.isENOENT())continue;let n;let r;let o=false;while(typeof(n=e.pattern())==="string"&&(r=e.rest())){const s=t.resolve(n);t=s;e=r;o=true}n=e.pattern();r=e.rest();if(o){if(this.hasWalkedCache.hasWalked(t,e))continue;this.hasWalkedCache.storeWalked(t,e)}if(typeof n==="string"){const e=n===".."||n===""||n===".";this.matches.add(t.resolve(n),i,e);continue}else if(n===x){if(!t.isSymbolicLink()||this.follow||e.checkFollowGlobstar()){this.subwalks.add(t,e)}const s=r?.pattern();const n=r?.rest();if(!r||(s===""||s===".")&&!n){this.matches.add(t,i,s===""||s===".")}else{if(s===".."){const e=t.parent||t;if(!n)this.matches.add(e,i,true);else if(!this.hasWalkedCache.hasWalked(e,n)){this.subwalks.add(e,n)}}}}else if(n instanceof RegExp){this.subwalks.add(t,e)}}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new Processor(this.opts,this.hasWalkedCache)}filterEntries(t,e){const s=this.subwalks.get(t);const i=this.child();for(const t of e){for(const e of s){const s=e.isAbsolute();const n=e.pattern();const r=e.rest();if(n===x){i.testGlobstar(t,e,r,s)}else if(n instanceof RegExp){i.testRegExp(t,n,r,s)}else{i.testString(t,n,r,s)}}}return i}testGlobstar(t,e,s,i){if(this.dot||!t.name.startsWith(".")){if(!e.hasMore()){this.matches.add(t,i,false)}if(t.canReaddir()){if(this.follow||!t.isSymbolicLink()){this.subwalks.add(t,e)}else if(t.isSymbolicLink()){if(s&&e.checkFollowGlobstar()){this.subwalks.add(t,s)}else if(e.markFollowGlobstar()){this.subwalks.add(t,e)}}}}if(s){const e=s.pattern();if(typeof e==="string"&&e!==".."&&e!==""&&e!=="."){this.testString(t,e,s.rest(),i)}else if(e===".."){const e=t.parent||t;this.subwalks.add(e,s)}else if(e instanceof RegExp){this.testRegExp(t,e,s.rest(),i)}}}testRegExp(t,e,s,i){if(!e.test(t.name))return;if(!s){this.matches.add(t,i,false)}else{this.subwalks.add(t,s)}}testString(t,e,s,i){if(!t.isNamed(e))return;if(!s){this.matches.add(t,i,false)}else{this.subwalks.add(t,s)}}}const makeIgnore=(t,e)=>typeof t==="string"?new Ignore([t],e):Array.isArray(t)?new Ignore(t,e):t;class GlobUtil{path;patterns;opts;seen=new Set;paused=false;aborted=false;#re=[];#oe;#ae;signal;maxDepth;constructor(t,e,s){this.patterns=t;this.path=e;this.opts=s;this.#ae=!s.posix&&s.platform==="win32"?"\\":"/";if(s.ignore){this.#oe=makeIgnore(s.ignore,s)}this.maxDepth=s.maxDepth||Infinity;if(s.signal){this.signal=s.signal;this.signal.addEventListener("abort",(()=>{this.#re.length=0}))}}#he(t){return this.seen.has(t)||!!this.#oe?.ignored?.(t)}#le(t){return!!this.#oe?.childrenIgnored?.(t)}pause(){this.paused=true}resume(){if(this.signal?.aborted)return;this.paused=false;let t=undefined;while(!this.paused&&(t=this.#re.shift())){t()}}onResume(t){if(this.signal?.aborted)return;if(!this.paused){t()}else{this.#re.push(t)}}async matchCheck(t,e){if(e&&this.opts.nodir)return undefined;let s;if(this.opts.realpath){s=t.realpathCached()||await t.realpath();if(!s)return undefined;t=s}const i=t.isUnknown()||this.opts.stat;const n=i?await t.lstat():t;if(this.opts.follow&&this.opts.nodir&&n?.isSymbolicLink()){const t=await n.realpath();if(t&&(t.isUnknown()||this.opts.stat)){await t.lstat()}}return this.matchCheckTest(n,e)}matchCheckTest(t,e){return t&&(this.maxDepth===Infinity||t.depth()<=this.maxDepth)&&(!e||t.canReaddir())&&(!this.opts.nodir||!t.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!t.isSymbolicLink()||!t.realpathCached()?.isDirectory())&&!this.#he(t)?t:undefined}matchCheckSync(t,e){if(e&&this.opts.nodir)return undefined;let s;if(this.opts.realpath){s=t.realpathCached()||t.realpathSync();if(!s)return undefined;t=s}const i=t.isUnknown()||this.opts.stat;const n=i?t.lstatSync():t;if(this.opts.follow&&this.opts.nodir&&n?.isSymbolicLink()){const t=n.realpathSync();if(t&&(t?.isUnknown()||this.opts.stat)){t.lstatSync()}}return this.matchCheckTest(n,e)}matchFinish(t,e){if(this.#he(t))return;const s=this.opts.absolute===undefined?e:this.opts.absolute;this.seen.add(t);const i=this.opts.mark&&t.isDirectory()?this.#ae:"";if(this.opts.withFileTypes){this.matchEmit(t)}else if(s){const e=this.opts.posix?t.fullpathPosix():t.fullpath();this.matchEmit(e+i)}else{const e=this.opts.posix?t.relativePosix():t.relative();const s=this.opts.dotRelative&&!e.startsWith(".."+this.#ae)?"."+this.#ae:"";this.matchEmit(!e?"."+i:s+e+i)}}async match(t,e,s){const i=await this.matchCheck(t,s);if(i)this.matchFinish(i,e)}matchSync(t,e,s){const i=this.matchCheckSync(t,s);if(i)this.matchFinish(i,e)}walkCB(t,e,s){if(this.signal?.aborted)s();this.walkCB2(t,e,new Processor(this.opts),s)}walkCB2(t,e,s,i){if(this.#le(t))return i();if(this.signal?.aborted)i();if(this.paused){this.onResume((()=>this.walkCB2(t,e,s,i)));return}s.processPatterns(t,e);let n=1;const next=()=>{if(--n===0)i()};for(const[t,e,i]of s.matches.entries()){if(this.#he(t))continue;n++;this.match(t,e,i).then((()=>next()))}for(const t of s.subwalkTargets()){if(this.maxDepth!==Infinity&&t.depth()>=this.maxDepth){continue}n++;const e=t.readdirCached();if(t.calledReaddir())this.walkCB3(t,e,s,next);else{t.readdirCB(((e,i)=>this.walkCB3(t,i,s,next)),true)}}next()}walkCB3(t,e,s,i){s=s.filterEntries(t,e);let n=1;const next=()=>{if(--n===0)i()};for(const[t,e,i]of s.matches.entries()){if(this.#he(t))continue;n++;this.match(t,e,i).then((()=>next()))}for(const[t,e]of s.subwalks.entries()){n++;this.walkCB2(t,e,s.child(),next)}next()}walkCBSync(t,e,s){if(this.signal?.aborted)s();this.walkCB2Sync(t,e,new Processor(this.opts),s)}walkCB2Sync(t,e,s,i){if(this.#le(t))return i();if(this.signal?.aborted)i();if(this.paused){this.onResume((()=>this.walkCB2Sync(t,e,s,i)));return}s.processPatterns(t,e);let n=1;const next=()=>{if(--n===0)i()};for(const[t,e,i]of s.matches.entries()){if(this.#he(t))continue;this.matchSync(t,e,i)}for(const t of s.subwalkTargets()){if(this.maxDepth!==Infinity&&t.depth()>=this.maxDepth){continue}n++;const e=t.readdirSync();this.walkCB3Sync(t,e,s,next)}next()}walkCB3Sync(t,e,s,i){s=s.filterEntries(t,e);let n=1;const next=()=>{if(--n===0)i()};for(const[t,e,i]of s.matches.entries()){if(this.#he(t))continue;this.matchSync(t,e,i)}for(const[t,e]of s.subwalks.entries()){n++;this.walkCB2Sync(t,e,s.child(),next)}next()}}class GlobWalker extends GlobUtil{matches;constructor(t,e,s){super(t,e,s);this.matches=new Set}matchEmit(t){this.matches.add(t)}async walk(){if(this.signal?.aborted)throw this.signal.reason;if(this.path.isUnknown()){await this.path.lstat()}await new Promise(((t,e)=>{this.walkCB(this.path,this.patterns,(()=>{if(this.signal?.aborted){e(this.signal.reason)}else{t(this.matches)}}))}));return this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;if(this.path.isUnknown()){this.path.lstatSync()}this.walkCBSync(this.path,this.patterns,(()=>{if(this.signal?.aborted)throw this.signal.reason}));return this.matches}}class GlobStream extends GlobUtil{results;constructor(t,e,s){super(t,e,s);this.results=new Minipass({signal:this.signal,objectMode:true});this.results.on("drain",(()=>this.resume()));this.results.on("resume",(()=>this.resume()))}matchEmit(t){this.results.write(t);if(!this.results.flowing)this.pause()}stream(){const t=this.path;if(t.isUnknown()){t.lstat().then((()=>{this.walkCB(t,this.patterns,(()=>this.results.end()))}))}else{this.walkCB(t,this.patterns,(()=>this.results.end()))}return this.results}streamSync(){if(this.path.isUnknown()){this.path.lstatSync()}this.walkCBSync(this.path,this.patterns,(()=>this.results.end()));return this.results}}const Jt=typeof process==="object"&&process&&typeof process.platform==="string"?process.platform:"linux";class Glob{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;opts;patterns;constructor(t,e){if(!e)throw new TypeError("glob options required");this.withFileTypes=!!e.withFileTypes;this.signal=e.signal;this.follow=!!e.follow;this.dot=!!e.dot;this.dotRelative=!!e.dotRelative;this.nodir=!!e.nodir;this.mark=!!e.mark;if(!e.cwd){this.cwd=""}else if(e.cwd instanceof URL||e.cwd.startsWith("file://")){e.cwd=(0,I.fileURLToPath)(e.cwd)}this.cwd=e.cwd||"";this.root=e.root;this.magicalBraces=!!e.magicalBraces;this.nobrace=!!e.nobrace;this.noext=!!e.noext;this.realpath=!!e.realpath;this.absolute=e.absolute;this.noglobstar=!!e.noglobstar;this.matchBase=!!e.matchBase;this.maxDepth=typeof e.maxDepth==="number"?e.maxDepth:Infinity;this.stat=!!e.stat;this.ignore=e.ignore;if(this.withFileTypes&&this.absolute!==undefined){throw new Error("cannot set absolute and withFileTypes:true")}if(typeof t==="string"){t=[t]}this.windowsPathsNoEscape=!!e.windowsPathsNoEscape||e.allowWindowsEscape===false;if(this.windowsPathsNoEscape){t=t.map((t=>t.replace(/\\/g,"/")))}if(this.matchBase){if(e.noglobstar){throw new TypeError("base matching requires globstar")}t=t.map((t=>t.includes("/")?t:`./**/${t}`))}this.pattern=t;this.platform=e.platform||Jt;this.opts={...e,platform:this.platform};if(e.scurry){this.scurry=e.scurry;if(e.nocase!==undefined&&e.nocase!==e.scurry.nocase){throw new Error("nocase option contradicts provided scurry option")}}else{const t=e.platform==="win32"?PathScurryWin32:e.platform==="darwin"?PathScurryDarwin:e.platform?PathScurryPosix:Vt;this.scurry=new t(this.cwd,{nocase:e.nocase,fs:e.fs})}this.nocase=this.scurry.nocase;const s=this.platform==="darwin"||this.platform==="win32";const i={...e,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:s,nocomment:true,noext:this.noext,nonegate:true,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug};const n=this.pattern.map((t=>new Minimatch(t,i)));const[r,o]=n.reduce(((t,e)=>{t[0].push(...e.set);t[1].push(...e.globParts);return t}),[[],[]]);this.patterns=r.map(((t,e)=>{const s=o[e];if(!s)throw new Error("invalid pattern object");return new Pattern(t,s,0,this.platform)}))}async walk(){return[...await new GlobWalker(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==Infinity?this.maxDepth+this.scurry.cwd.depth():Infinity,platform:this.platform,nocase:this.nocase}).walk()]}walkSync(){return[...new GlobWalker(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==Infinity?this.maxDepth+this.scurry.cwd.depth():Infinity,platform:this.platform,nocase:this.nocase}).walkSync()]}stream(){return new GlobStream(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==Infinity?this.maxDepth+this.scurry.cwd.depth():Infinity,platform:this.platform,nocase:this.nocase}).stream()}streamSync(){return new GlobStream(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==Infinity?this.maxDepth+this.scurry.cwd.depth():Infinity,platform:this.platform,nocase:this.nocase}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}}const hasMagic=(t,e={})=>{if(!Array.isArray(t)){t=[t]}for(const s of t){if(new Minimatch(s,e).hasMagic())return true}return false};function globStreamSync(t,e={}){return new Glob(t,e).streamSync()}function globStream(t,e={}){return new Glob(t,e).stream()}function globSync(t,e={}){return new Glob(t,e).walkSync()}async function glob_(t,e={}){return new Glob(t,e).walk()}function globIterateSync(t,e={}){return new Glob(t,e).iterateSync()}function globIterate(t,e={}){return new Glob(t,e).iterate()}const Yt=globStreamSync;const Xt=Object.assign(globStream,{sync:globStreamSync});const Qt=globIterateSync;const te=Object.assign(globIterate,{sync:globIterateSync});const ee=Object.assign(globSync,{stream:globStreamSync,iterate:globIterateSync});const se=Object.assign(glob_,{glob:glob_,globSync:globSync,sync:ee,globStream:globStream,stream:Xt,globStreamSync:globStreamSync,streamSync:Yt,globIterate:globIterate,iterate:te,globIterateSync:globIterateSync,iterateSync:Qt,Glob:Glob,hasMagic:hasMagic,escape:escape_escape,unescape:unescape_unescape});se.glob=se}};var __webpack_module_cache__={};function __nccwpck_require__(t){var e=__webpack_module_cache__[t];if(e!==undefined){return e.exports}var s=__webpack_module_cache__[t]={exports:{}};var i=true;try{__webpack_modules__[t](s,s.exports,__nccwpck_require__);i=false}finally{if(i)delete __webpack_module_cache__[t]}return s.exports}(()=>{__nccwpck_require__.n=t=>{var e=t&&t.__esModule?()=>t["default"]:()=>t;__nccwpck_require__.d(e,{a:e});return e}})();(()=>{var t=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__;var e;__nccwpck_require__.t=function(s,i){if(i&1)s=this(s);if(i&8)return s;if(typeof s==="object"&&s){if(i&4&&s.__esModule)return s;if(i&16&&typeof s.then==="function")return s}var n=Object.create(null);__nccwpck_require__.r(n);var r={};e=e||[null,t({}),t([]),t(t)];for(var o=i&2&&s;typeof o=="object"&&!~e.indexOf(o);o=t(o)){Object.getOwnPropertyNames(o).forEach((t=>r[t]=()=>s[t]))}r["default"]=()=>s;__nccwpck_require__.d(n,r);return n}})();(()=>{__nccwpck_require__.d=(t,e)=>{for(var s in e){if(__nccwpck_require__.o(e,s)&&!__nccwpck_require__.o(t,s)){Object.defineProperty(t,s,{enumerable:true,get:e[s]})}}}})();(()=>{__nccwpck_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e)})();(()=>{__nccwpck_require__.r=t=>{if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(t,"__esModule",{value:true})}})();if(typeof __nccwpck_require__!=="undefined")__nccwpck_require__.ab=__dirname+"/";var __webpack_exports__={};(()=>{"use strict";__nccwpck_require__.r(__webpack_exports__);__nccwpck_require__.d(__webpack_exports__,{exportFunctions:()=>t.H,funcNameFromRelPathDefault:()=>t.y});var t=__nccwpck_require__(911)})();module.exports=__webpack_exports__})();